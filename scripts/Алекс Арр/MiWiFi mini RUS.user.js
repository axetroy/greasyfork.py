// ==UserScript==
// @name        MiWiFi mini RUS
// @description Перевод настроек роутера
// @author      SilentTwilight
// @icon        http://miwifi.com/favicon.ico
// @include	*192.168.31.1/*
// @include	http://miwifi.com/*
// @version     1.0 build 6
// @namespace 
// ==/UserScript==
// 

(function () {

    function findAndReplace(searchText, replacement, searchNode) {
        if (!searchText || typeof replacement === 'undefined') {
            // Throw error here if you want...
            return;
        }
        var regex = typeof searchText === 'string' ? new RegExp(searchText, 'g') : searchText,
            childNodes = (searchNode || document.body).childNodes,
            cnLength = childNodes.length;
	    excludes = 'html,head,style,title,link,meta,script,object,iframe';
        while (cnLength--) {
            var currentNode = childNodes[cnLength];
            if (currentNode.nodeType === 1 && (',' + excludes + ',').indexOf(',' + currentNode.nodeName.toLowerCase() + ',') === -1) {
                arguments.callee(searchText, replacement, currentNode);
            }
            if (currentNode.nodeType !== 3 || !regex.test(currentNode.data) ) {
                continue;
            }
            var parent = currentNode.parentNode,
                frag = (function(){
                    var html = currentNode.data.replace(regex, replacement),
                        wrap = document.createElement('div'),
                        frag = document.createDocumentFragment();
                    wrap.innerHTML = html;
                    while (wrap.firstChild) {
                        frag.appendChild(wrap.firstChild);
                    }
                    return frag;
                })();
            parent.insertBefore(frag, currentNode);
            parent.removeChild(currentNode);
        }
    }

    function translate() {
        var ts = {
			"路由器正常工作情况下建议使用系统升级检测进行升级，在当系统无法升级或需要降级到前一版本时使用手动上传rom包进行升级。":"В случае возникновения ошибок при OTA-обновлении или если надо понизить версию прошивки, вы можете загрузить обновление вручную",
			"升级过程中请勿断开路由器电源，否则将导致路由器损坏而无法使用；升级完成后，路由器将会自动重新启动。":"Не отключайте питание во врея обновления, это может вызвать сбой. Роутер автоматически перезагрузится после успешного обновления",
			"你的浏览器禁止了Javascript功能，会造成无法使用系统进行路由器管理，请开启。":"Javascript отключён, он необходим для работы в административной панели",
			"您没有在列表中添加任何设备，保存后所有设备将无法访问网络！请返回修改":"Необходимо добавить хотя бы одно устройство в белый список иначе никто не сможет получить доступ к сети!",
			"开启DMZ功能可以将内网某一个设备的IP映射到外网，方便从外网访问到该设备。":"Функция DMZ позволяет устройству иметь определённый IP для быстрого доступа к нему из интернета",
			"你似乎没有连接网线，建议您接入网线之后继续，或者您可以进行无线中继":"Кабель не подключён. Подключите кабель или используйте беспроводную технологию",
			"IP地址由4个 0~255 之间的数字组成，数字之间用点区隔":"IP состоит из 4х целых чисел от 0 до 255, разделёнными точкой",
			"经过检测，建议使用的DHCP方式(系统自动分配IP地址)":"Рекомендуется режим DHCP (система сама назначит IP-адрес)",
			"MAC地址格式有误，如ab:cd:ef:11:22:33":"Неверный формат MAC-адреса, должен быть вида AB:CD:EF:11:22:33",
			"自动连接路由器失败，请检查无线或者网线是否连接正确。":"Ошибка подключения, проверьте кабель",
			"经过检测，无法识别你的上网类型，请手工选择上网方式":"Автоматические настройки невозможны, настройте роутер вручную",
			"关闭该功能将使路由器恢复出厂MAC地址，确认关闭？":"Нажав ОК, вы восстановите заводской MAC-адрес",
			"是否确定恢复出厂设置，并让小米路由器回到初始状态？":"Сбросить настройки на заводские?",
			"正在配置用户名与密码，15秒后将自动跳转管理后台":"Первичная настройка завершена. Через 15 секунд вы перейдёте в административную панель",
			"正在配置用户名与密码，请稍候手动连接Wi-Fi":"Настройте Wi-Fi вручную ",
			"经过检测，你的WAN口无法连通，可能网线没插好":"Ошибка подключения к кабелю интернета",
			"连接Wi-Fi成功后请刷新页面进入管理后台":" обновите страницу после входа",
			"在路由器工作模式和中继工作模式之间进行切换":"Переключение между режимом маршрутизатора и повторителя",
			"只需简单设置，立即开启全新的智能路由器":"Настройте и пользуйтесь",
			"请问你睡着了吗？这么久还没完成初始化。":"Ку-ку! Настройка ещё не завершена!",
			"将Wi-Fi密码同时设为路由器管理密码":"Использовать один пароль",
			"设置成功正在重启，需要30秒请等待":"Настройки сохранены, перезагрузка. Подождите 30 секунд",
			"请选择或输入需要中继的无线网络和密码":"Выберите нужные виды беспроводных сетей",
			"必须由字母，数字，下划线和破折号组成":" должен состоять из букв, цифр, подчёркивания и тире",
			"扩大已有无线Wi-Fi网络的覆盖范围":"Расширение существующей сети",
			"体验路由器远程管理和更多好玩功能！":"Управляйте устройством удалённо!",
			"检查失败，网络繁忙请刷新页面重试。":"ошибка проверки обновлений",
			"你确定要清除这个设备的QoS配置？":"Удалить настройки QoS для данного устройства?",
			"网络覆盖已经变的更广、信号更强！":"Охват шире, сигнал сильнее!",
			"确认要解除选中项目的绑定关系？":"Снять привязку с выбранных пунктов?",
			"恭喜！小米路由器已初始化完成！":"Поздравляем, настройка завершена!",
			"请输入运营商提供的宽带账号信息":"Введите настройки PPPoE",
			"创建一个新的无线Wi-Fi网络":"Новое Wi-Fi подключение",
			"密码过长，请使用短一些的密码":"Слишком длинный пароль",
			"名字过长，请使用短一些的名字":"Слишком длинное имя",
			"正在检测上网连接方式，请稍等":"Подключение к сети",
			"可以手动更改为其他MAC地址":"а потом вернуть заводские настройки",
			"你的版本是最新的，无需升级。":"обновление не требуется",
			"PPTP/L2TP 服务列表":"Список служб PPTP/L2TP",
			"初始化设置已经其他终端完成":"Другие настройки завершены",
			"请设置Wi-Fi名称与密码":"Установите логин и пароль для доступа к Wi-Fi",
			"Wi-Fi密码不能少于8位":"Пароль меньше 8 символов",
			"跳转到MiWiFi.com":"Переход на MiWiFi.com",
			"你什么都没改变，提交什么啊":"Вы что-то изменили",
			"请选择要扩大范围的无线网络":"Выберите сеть для увеличения обхвата",
			"密码错误，请重试或者尝试":"Неверный пароль. Попробуйте ещё раз или используйте root-пароль ",
			"扫描二维码下载手机APP":"Сканируйте QR-код ниже для загрузки мобильного приложения",
			"必须是base64位字符":" должно быть base64",
			"当前管理终端的MAC地址":"Вы можете изменить MAC-адрес устройства",
			"你未选择文件，请重新选择":"Не выбран файл",
			"网络正常情况下不建议修改":"обычно не требует донастройки",
			"请手工选择需要的工作模式":"Выберите режим работы",
			"用户设置限速规则与优先级":"пользователь выбирает приоритеты и ограничения",
			"IP地址最后一位不能为空":"Введите окончание IP-адреса",
			"关闭成功，生效中，请稍候":"Отклюение DMZ, подождите",
			"初始化设置不是我完成的":"Настройка не выполнена",
			"操作生效，等待设备重启":"Настройки применены, устройство перезагружается",
			"必须是完整的URL,如":" должно быть URL, например",
			"WPA/WPA2个人版":"WPA/WPA2",
			"出现10个错误，请检查":"Ошибка 10!",
			"发生未知错误，测速失败":"Неизвестная ошибка",
			"当前使用的MAC地址是":"Текущий MAC: ",
			"DHCP的静态IP分配":"Привязка IP к устройствам",
			"你确定要解除此项绑定？":"Убрать привязку?",
			"当前QoS服务暂未开启":"QoS отключен",
			"请输入路由器管理密码":"Введите пароль для входа",
			"操作生效,重启成功！":"Настройки применены, устройство перезагружено!",
			"管理密码不能少于8位":"Root-пароль короче 8 символов",
			"初始化设置是我完成的":"Настройка закончена",
			"查看当前连接终端设备":"Посмотреть",
			"不允许列表中设备访问":"не разрешать доступ пользователям из списка",
			"只允许列表中设备访问":"разрешать доступ только списку",
			"正在检测更新，请稍候":"проверка обновлений",
			"文件上传到服务器失败":"Ошибка загрузки",
			"DHCP静态IP分配":"Привязка IP",
			"确定要删除这项数据吗":"Удалить?",
			"系统自动进行智能限速":"умное ограничение скорости",
			"系统错误，请重试。":"Системная ошибка",
			"经过检测，建议使用":"После тестирования рекомендуем ",	
			"必须有字母数字组成":" должен состоять из букв и цифр",
			"请输入标准字符，如":"Введите стандартные символы, например ",
			"欢迎使用小米路由器":"Добро пожаловать!",
			"快速设置Wi-Fi":"Настройка Wi-Fi",
			"恢复出厂MAC地址":"Восстановление MAC",
			"还没有设备添加进来":"Можно добавить ещё",
			"还没有设备连接进来":"Не подключено ни одного устройства",
			"还没有服务添加进来":"Можно добавить ещё сервисы",
			"必须大于零的整数":"должно быть натуральным больше 0",
			"你已完成无线中继":"Настройка Wi-Fi завершена",
			"用户许可使用协议":"Лицензионного соглашения",
			"必须全是邮箱地址":" не e-mail",
			"隐藏网络不被发现":"Скрыть сеть",
			"UPnP设备列表":"Список устройств UPnP",
			"没有UPnP设备":"Нет UPnP устройств",
			"已绑定的设备列表":"Список",
			"使用DHCP上网":"Использовать DHCP",
			"手工输入网络名称":"Скрытая сеть (ввести вручную)",
			"手工设置外网带宽":"Настройка пропускной способности",
			"刷新当前设备列表":"Обновить список устройств",
			"新建端口转发规则":"Новое правило проброса портов",
			"范围转发规则列表":"Список правил",
			"新建范围转发规则":"Новый диапазон адресов",
			"配置成功，请稍候":"Настройка завершена, подождите",
			"DMZ IP地址":"DMZ IP",
			"端口转发规则列表":"Список правил",
			"无线MAC地址过滤":"Фильтрация по MAC",
			"必须是信用卡号":" должен быть номером кредитки",
			"允许所有人连接":"Свободное подключение",
			"PPPoE方式":"PPPoE подключение",
			"我已经插好网线":"Кабель подключен",
			"Wi-Fi设置":"Настройка Wi-Fi",
			"WPA2个人版":"WPA2 шифрование",
			"必须是邮箱地址":" не e-mail",
			"Wi-Fi名称":"Название",
			"Wi-Fi密码":"Пароль",
			"查看路由器信息":"Статистика данных",
			"还没有进行测速":"Ещё не проводилась",
			"需要输入帐号与":"Введите логин и ",
			"MAC地址克隆":"Клонирование MAC",
			"黑名单设备列表":"Чёрный список устройств",
			"白名单设备列表":"Белый список устройств",
			"从在线列表添加":"Загрузить из подключённых",
			"修改路由器密码":"Сохранить",
			"修改路由器密码":"Изменение пароля",
			"局域网IP地址":"IP-адрес устройства",
			"上传并安装固件":"Установить",
			"外网带宽检测":"Проверка скорости",
			"智能限速QoS":"Настройка QoS",
			"QoS智能限速":"Настройка QoS",
			"删除QoS设置":"Удаление настроек",
			"手工设置QoS":"Ручная настройка QoS",
			"TCP和UDP":"TCP и UDP",
			"一键无线中继":"Переключить",
			"不能包含中文":" должно быть с китайскими символами",
			"必须是正整数":" должно быть натуральным",
			"等待自动跳转":"Автоматический переход",
			"已阅读并同意":"Принимаю условия ",
			"日志上传成功":"Журнал успешно загружен",
			"加载中...":"Загрузка...",
			"查看带宽信息":"Статистика скорости",
			"查看带宽信息":"Скорость",
			"网线连网设备":"Подключение",
			"无线访问控制":"Доступ к Wi-Fi",
			"修改上网方式":"Изменить",
			"DHCP服务":"DHCP",
			"恢复出厂设置":"Сброс настроек",
			"UPnP状态":"Статус UPnP",
			"没有设置信息":"Пусто",
			"工作模式切换":"Режим работы",
			"无线中继模式":"Режим повторителя",
			"UPnP未开启":"UPnP отключен",
			"IP和MAC":"IP и MAC",
			"内部IP地址":"Внутр.IP",
			"保存并生效":"Сохранить и применить",
			"必须是字母":" должен состять из букв",
			"必须是小数":" должно быть десятичным",
			"必须是数字":" должно быть числом",
			"必须是整数":" должно быть целым",
			"小米路由器":"Xiaomi WiFi-mini",
			"类型的文件":" типом",
			"局域网设置":"Настройка LAN",
			"正在查询中":"Запрос",
			"局域网IP":"IP-адрес",
			"请选择固件":"Выберите файл прошивки",
			"客户端IP":"IP клиента",
			"MAC地址":"MAC",
			"黑名单模式":"Чёрный список",
			"白名单模式":"Белый список",
			"QoS状态":"Состояние QoS",
			"路由器模式":"Режим роутера",
			"服务提供商":"Поставщик",
			"设置DMZ":"Настройка DMZ",
			"服务器地址":"Адрес сервера",
			"解除绑定":"Удалить",
			"解绑选中":"Убрать",
			"开始升级":"Обновить",
			"选择网络":"Название",
			"网络名称":"Название",
			"输入密码":"Пароль",
			"连接类型":"Тип соединения",
			"子网掩码":"Маска",
			"静态IP":"Стат.IP",
			"设备列表":"Оборудование",
			"设备信息":"Инфо",
			"连接时长":"Действие",
			"开始IP":"Начало",
			"结束IP":"Конец",
			"升级检测":"Сохранить",
			"当前版本":"Текущая версия ",
			"手动升级":"Обновление вручную",
			"上传日志":"Загрузка журнала",
			"立即恢复":"Сброс",
			"端口转发":"Проброс портов",
			"应用名称":"Имя",
			"内部端口":"Внутренний",
			"外部端口":"Внешний",
			"增加一项":"Добавить",
			"一键绑定":"Сохранить",
			"确认提示":"Сохранить",
			"不能相同":" не могут быть одинаковы",
			"不能为空":" не может быть пустым",
			"必须大于":" должно быть больше ",
			"必须小于":" должно быть меньше ",
			"必须等于":" должно быть равно ",
			"上网设置":"Настройки интернета",
			"访问官网":"Сайт",
			"服务热线":"Горячая линия",
			"无需拨号":"Не набирать",
			"需要拨号":"Настройки ",
			"不能少于":" не менее ",
			"不能大于":" не более ",
			"加密方式":"Шифрование",
			"提示信息":"Сообщение",
			"官方微信":"QR-код",
			"官方微博":"Микроблог",
			"KB/S":" Кбит/сек",
			"МБ/S":" Мбит/сек",
			"混合加密":"Гибрид ",
			"宽带密码":"Пароль",
			"输入有误":"Ошибка",
			"管理密码":"Пароли",
			"宽带账号":"Логин",
			"用户社区":"Форум",
			"我要重置":"Сброс",
			"管理密码":"Root",
			"官方网站":"Сайт",
			"一键中继":"Ключ",
			"路由状态":"Статистика",
			"路由设置":"Настройки",
			"终端设备":"Пользователи",
			"稳定运行":"Время работы",
			"立即测速":"Проверка скорости",
			"外网速度":"Скорость загрузки",
			"系统版本":"Прошивка",
			"加密方式":"Шифрование",
			"IP地址":"IP-адрес ",
			"正在测速":"Проверка скорости",
			"重新测速":"Повтор",
			"外网带宽":"Сеть",
			"终端管理":"Управление",
			"下载带宽":"Загрузка",
			"上传带宽":"Отдача",
			"手工修改":"Изменить",
			"网络速度":"Проверка скорости",
			"无线信道":"Канал",
			"信号强度":"Мощность",
			"安全中心":"Безопасность",
			"高级设置":"Опции",
			"系统状态":"Состояние",
			"频段带宽":"Частоты",
			"上网方式":"Интернет",
			"控制模式":"Режим",
			"设备名称":"Имя",
			"设置成功":"Сохранено",
			"手工添加":"Добавить вручную",
			"确认密码":"Повтор",
			"自动配置":"Автонастройка",
			"特殊拨号":"Специальный набор",
			"2.4G":"2.4 Гц",
			"Mbps":"Мбит/сек",
			"Kbps":"Кбит/сек",
			"默认网关":"Шлюз",
			"无线网络":"Настройка Wi-Fi",
			"当前网速":"Текущая скорость",
			"智能限速":"Умная скорость",
			"限速模式":"Режим",
			"系统自动":"Авто",
			"上次测速":"Последнее",
			"最大带宽":"Макс. пропускная способность",
			"上传上限":"Отдача",
			"下载上限":"Загрузка",
			"绑定设备":"Выбор оборудования",
			"服务列表":"Список услуг",
			"主机名称":"Имя хоста",
			"最近更新":"Обновление",
			"添加服务":"Добавить службу",
			"主机名称":"Название",
			"状态检查":"Проверка",
			"强制更新":"Обновление",
			"添加规则":"Добавить",
			"起始端口":"Начальный",
			"结束端口":"Конечный",
			"拨号成功":" успешно!",
			"连网设备":" антенна",
			"目标IP":"Порт",
			"协议类型":"Тип",
			"添加服务":"Добавить службу",
			"无加密":"Без шифрования ",
			"不一致":" несовместимы",
			"必须是":" должно быть ",
			"重启中":"Перезагрузка",
			"处理中":"Сохранение",
			"消息框":"Сообщение",
			"强加密":"Сильное ",
			"个字节":" байт",
			"输入与":" и ",
			"输入与":" и ",
			"登录中":"Вход",
			"互联网":"Интернет",
			"M带宽":" Мб",
			"稳定版":" стабильная",
			"开发版":" beta",
			"G网络":" Гц",
			"已连接":"Подкючено",
			"原密码":"Старый",
			"新密码":"Новый",
			"下一步":"Далее",
			"优先级":"Приоритет",
			"用户名":"Логин",
			"未生效":"Отключено",
			"已生效":": включено",
			"服务器":"Сервер",
			"口速率":" Скорость",
			"5G":"5 Гц",
			"网关":"Шлюз",
			"添加":"Добавить",
			"租约":"",
			"注意":"Внимание",
			"协议":"Протокол",
			"移除":"Удалить",
			"跳过":"Пропустить",
			"用时":"Прошло ",
			"开始":"Начать",
			"取消":"Отмена",
			"完成":"Готово",
			"密码":"Пароль",
			"继续":"Далее",
			"返回":"Назад",
			"或者":" или ",
			"账号":"Логин",
			"小时":" ч. ",
			"登录":"Вход",
			"确认":"ОК",
			"MB/S":"Мбайт/сек",
			"KB/S":"Кбайт/сек",
			"KB":"КБ",
			"/S":"/сек",
			"退出":"Выход",
			"名称":"Имя",
			"保存":"Сохранить",
			"本机":"Состояние",
			"型号":"Модель",
			"关机":"Выключить",
			"重启":"Перезагрузка",
			"分钟":"мин.",
			"自动":"Авто ",
			"穿墙":"Максимум",
			"标准":"Средняя",
			"节能":"Минимум",
			"操作":"Действие",
			"确定":"ОК",
			"应用":"Применить",
			"必填":"Обязательный",
			"选填":"Не обязательный",
			"字节":"Байт",
			"切换":"Переключить",
			"上传":"Отдача",
			"下载":"Загрузка",
			"手工":"Вручную",
			"删除":"Удалить",
			"编辑":"Изменить",
			"状态":"Статус",
			"访问":" доступ",
			"速率":"скорость",
			"推荐":"рекомендуется",
			"账户":"Логин",
			"外网":"Экстранет ",
			"断开":" (Отключить)",
			"位":" символов",
			"天":" дн. ",
			"秒":" сек. ",
			"分":" мин. ",
			"台":"шт.",
			"中":"Средний",
			"低":"Низкий",
			"高":"Высокий",	
			"：":":",
			"，":", ",
		};
        for(var t in ts) {
            findAndReplace(t,ts[t]);
        };
        setTimeout(translate, 1000);
    };

    setTimeout(translate, 1000);

})();