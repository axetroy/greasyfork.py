// ==UserScript==
// @name         超星慕课小工具
// @namespace    https://github.com/CodFrm/cxmooc-tools
// @version 2.083
// @description  一个超星慕课刷课工具,火狐,谷歌,油猴支持.全自动任务,视频倍速秒过,作业考试题库,验证码自动打码(੧ᐛ੭挂科模式,启动)
// @author       CodFrm
// @match        *://*/mycourse/studentstudy?*
// @match        *://*/ztnodedetailcontroller/visitnodedetail?*
// @match        *://*/antispiderShowVerify.ac*
// @match        *://*/html/processVerify.ac?*
// @match        *://*/exam/test/reVersionPaperMarkContentNew?*
// @match        *://*/exam/test/reVersionTestStartNew?*
// @grant        GM_xmlhttpRequest
// @license      MIT
// ==/UserScript==

let config = {
    answer_ignore: false,    //忽略题目,勾选此处将不会答题
    auto: true,              //全自动挂机,无需手动操作,即可自动观看视频等
    interval: 5,             //时间间隔,当任务点完成后,会等待5分钟然后跳转到下一个任务点
    rand_answer: false,      //随机答案,没有答案的题目将自动的生成一个答案
    video_multiple: 1,       //视频播放倍速,视频播放的倍数,建议不要改动,为1即可,这是危险的功能
    video_mute: true,        //视频静音,视频自动静音播放
    vtoken: "user",          //鉴权token
};

localStorage['config'] = JSON.stringify(config);

/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/tampermonkey/cxmooc-pack.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/charenc/charenc.js":
/*!*****************************************!*\
  !*** ./node_modules/charenc/charenc.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n\n\n//# sourceURL=webpack:///./node_modules/charenc/charenc.js?");

/***/ }),

/***/ "./node_modules/crypt/crypt.js":
/*!*************************************!*\
  !*** ./node_modules/crypt/crypt.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n\n\n//# sourceURL=webpack:///./node_modules/crypt/crypt.js?");

/***/ }),

/***/ "./node_modules/is-buffer/index.js":
/*!*****************************************!*\
  !*** ./node_modules/is-buffer/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n\n\n//# sourceURL=webpack:///./node_modules/is-buffer/index.js?");

/***/ }),

/***/ "./node_modules/md5/md5.js":
/*!*********************************!*\
  !*** ./node_modules/md5/md5.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("(function(){\r\n  var crypt = __webpack_require__(/*! crypt */ \"./node_modules/crypt/crypt.js\"),\r\n      utf8 = __webpack_require__(/*! charenc */ \"./node_modules/charenc/charenc.js\").utf8,\r\n      isBuffer = __webpack_require__(/*! is-buffer */ \"./node_modules/is-buffer/index.js\"),\r\n      bin = __webpack_require__(/*! charenc */ \"./node_modules/charenc/charenc.js\").bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message))\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n\n\n//# sourceURL=webpack:///./node_modules/md5/md5.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?");

/***/ }),

/***/ "./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = {\r\n    url: \"https://cx.icodef.com/\",\r\n    version: 2.08,\r\n    update: 'https://github.com/CodFrm/cxmooc-tools/releases',\r\n    enforce: false,\r\n    cx: {\r\n        player: 'https://cx.icodef.com/player/cxmooc-tools.swf',\r\n        resplugin: 'https://cx.icodef.com/player/ResourcePlug.swf'\r\n    },\r\n    injection: '',\r\n    hotversion: {\r\n        v2_08: 2.083,\r\n        v2_07: 2.071,\r\n        v2_06: 2.06,\r\n    },\r\n    getHotVersion: function (ver) {\r\n        let dealver = 'v' + ('' + ver || this.version).replace('.', '_');\r\n        hotversion = this.hotversion[dealver] || this.version;\r\n        return hotversion;\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/config.js?");

/***/ }),

/***/ "./src/cxmooc-tools/chaoxing/chaoxing.js":
/*!***********************************************!*\
  !*** ./src/cxmooc-tools/chaoxing/chaoxing.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\r\n * 超星刷课功能集合\r\n */\r\nconst common = __webpack_require__(/*! ../common */ \"./src/cxmooc-tools/common.js\");\r\nconst util = __webpack_require__(/*! ./util */ \"./src/cxmooc-tools/chaoxing/util.js\");\r\nconst Video = __webpack_require__(/*! ./video */ \"./src/cxmooc-tools/chaoxing/video.js\");\r\nconst Topic = __webpack_require__(/*! ./topic */ \"./src/cxmooc-tools/chaoxing/topic.js\");\r\nconst Vcode = __webpack_require__(/*! ./vcode */ \"./src/cxmooc-tools/chaoxing/vcode.js\");\r\nconst Exam = __webpack_require__(/*! ./exam */ \"./src/cxmooc-tools/chaoxing/exam.js\");\r\n\r\nmodule.exports = function () {\r\n    let self = this;\r\n    this.list = undefined;\r\n    this.index = 0;\r\n    this.iframe = undefined;\r\n    this.document = undefined;\r\n    this.complete_num = 0;\r\n    this.vcode = new Vcode();\r\n    this.inSwitch = false;\r\n    /**\r\n     * 查找iframe\r\n     * @param iframeElement \r\n     */\r\n    function findIframe(iframeElement) {\r\n        for (let i = 0; i < iframeElement.length; i++) {\r\n            if ($(iframeElement[i]).attr('cxmooc-tools') == 'requisition') {\r\n                continue;\r\n            }\r\n            let obj = undefined;\r\n            if ($(iframeElement[i]).hasClass('ans-insertvideo-online')) {\r\n                obj = new Video();\r\n            } else if ($(iframeElement[i]).attr('src') != undefined && $(iframeElement[i]).attr('src').indexOf('modules/work') > 0) {\r\n                obj = new Topic();\r\n            }\r\n            if (obj != undefined) {\r\n                self.list.push(obj);\r\n                obj.iframe = iframeElement[i];\r\n                obj.complete = self.complete;\r\n                obj.loadover = self.loadover;\r\n                $(iframeElement[i]).attr('cxmooc-tools', 'requisition');\r\n            }\r\n            findIframe($(iframeElement[i].contentDocument).find('iframe'));\r\n        }\r\n    }\r\n\r\n    this.complete = function (event) {\r\n        switch (event) {\r\n            case 1: {\r\n                lazySwitch(this.pushTopic);\r\n                break;\r\n            }\r\n            case 2: {\r\n                switchTask()\r\n                break;\r\n            }\r\n            default: {\r\n                //完成事件,进行完成操作\r\n                lazySwitch();\r\n            }\r\n        }\r\n    }\r\n\r\n    let lastTimeout = 0;\r\n    //hook\r\n    let hookChangeDisplayContent = window.changeDisplayContent;\r\n    window.changeDisplayContent = function (num, totalnum, chapterId, courseId, clazzid, knowledgestr) {\r\n        clearTimeout(lastTimeout);\r\n        hookChangeDisplayContent(num, totalnum, chapterId, courseId, clazzid, knowledgestr);\r\n    }\r\n    let hookGetTeacherAjax = window.getTeacherAjax;\r\n    window.getTeacherAjax = function (courseId, clazzid, chapterId, cpi, chapterVerCode) {\r\n        clearTimeout(lastTimeout);\r\n        hookGetTeacherAjax(courseId, clazzid, chapterId, cpi, chapterVerCode);\r\n    }\r\n    /**\r\n     * 延迟切换\r\n     */\r\n    function lazySwitch(callback) {\r\n        //无任务\r\n        config.auto && self.notice(config.interval + \"分钟后插件将自动切换下一节任务\");\r\n        config.auto && common.log(config.interval + \" after switch\")\r\n        clearTimeout(lastTimeout);\r\n        lastTimeout = setTimeout(function () {\r\n            if (callback == undefined) {\r\n                switchTask();\r\n            } else {\r\n                callback();\r\n            }\r\n        }, config.duration);\r\n    }\r\n\r\n    this.loadover = function (event) {\r\n        if (event == self.list[0]) {\r\n            //第一个加载完成\r\n            event.pause && config.auto && ignoreCompile(event);\r\n        }\r\n    }\r\n\r\n    //忽略完成的任务\r\n    function ignoreCompile(event) {\r\n        if (config.answer_ignore && self.list[self.index] instanceof Topic) {\r\n            switchTask();\r\n        } else {\r\n            if (util.isFinished(event.iframe) || !util.isTask(event.iframe)) {\r\n                //完成了,或者非任务点\r\n                switchTask();\r\n            } else {\r\n                //判断是否切换了页面\r\n                self.complete_num++;\r\n                event.start();\r\n            }\r\n        }\r\n    }\r\n\r\n    function switchTask() {\r\n        if (!config.auto) {\r\n            return;\r\n        }\r\n        //判断是否切换了页面\r\n        if (self.list[self.index] != undefined) {\r\n            common.log(self.list[self.index].iframe.className + \" \" + self.index + \" switch\")\r\n        } else {\r\n            common.log(\"null \" + self.index + \" switch\")\r\n        }\r\n        //切换下一个未完成的任务\r\n        if (self.list.length > 0 && self.index < self.list.length - 1) {\r\n            self.index += 1;\r\n            ignoreCompile(self.list[self.index]);\r\n            return;\r\n        }\r\n        if (self.complete_num <= 0) {\r\n            self.complete_num = 1;\r\n            if (self.list.length > 0) {\r\n                lazySwitch();\r\n            } else {\r\n                switchTask();\r\n            }\r\n            return;\r\n        }\r\n        let folder = $('.tabtags').find('span');\r\n        for (let i = 0; i < folder.length; i++) {\r\n            if ($(folder[i]).hasClass('currents')) {\r\n                if (i < folder.length - 1) {\r\n                    folder[i + 1].click();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        nextTaskPoint();\r\n    }\r\n\r\n    function nextTaskPoint() {\r\n        let undone = $('.ncells .currents').parents(\".cells,.ncells\").nextAll(\".ncells,.cells\").find(\"[class*='orange']\");\r\n        if (undone.length <= 0) {\r\n            //扫描锁\r\n            if ($('.roundpointStudent.lock').length > 0) {\r\n                setTimeout(nextTaskPoint, 4000);\r\n            } else {\r\n                alert('所有任务点已完成');\r\n            }\r\n            return;\r\n        }\r\n        undone = undone[0];\r\n        let a = $(undone).parents('a')[0];\r\n        a.click();\r\n        //为了好看\r\n        $(\".currents[id*='cur']\").removeClass('currents');\r\n        $(undone).parent().addClass('currents');\r\n    }\r\n\r\n    this.studentstudy = function () {\r\n        common.log(\"studentstudy load\");\r\n        varInit();\r\n        let iframe = $('iframe');\r\n        self.iframe = iframe;\r\n        self.document = self.iframe[0].contentDocument\r\n        self.notice(config.auto ? '正在自动挂机中' : '');\r\n        findIframe(iframe);\r\n        for (let i = 0; i < self.list.length; i++) {\r\n            self.list[i].init();\r\n        }\r\n        //无任务\r\n        if (self.list.length <= 0) {\r\n            lazySwitch();\r\n        }\r\n    }\r\n\r\n    function varInit() {\r\n        self.list = new Array();\r\n        self.index = 0;\r\n        self.complete_num = 0;\r\n        clearTimeout(lastTimeout);\r\n    }\r\n\r\n    this.read = function () {\r\n        let timer = undefined;\r\n        let slide = function () {\r\n            if (document.body.getScrollHeight() - document.body.getHeight() <= document.documentElement.scrollTop + 40) {\r\n                let next = $('.ml40.nodeItem.r');\r\n                if (next.length <= 0) {\r\n                    self.notice('看完啦~');\r\n                    alert('看完啦~');\r\n                } else {\r\n                    next[0].click();\r\n                }\r\n                clearTimeout(timer);\r\n                return;\r\n            }\r\n            document.body.scrollTop = document.documentElement.scrollTop = document.documentElement.scrollTop + common.randNumber(60, 80);\r\n            timer = setTimeout(slide, common.randNumber(15, 25) * 1000);\r\n        }\r\n        slide();\r\n    }\r\n\r\n    this.notice = function (text) {\r\n        let el = undefined;\r\n        if ($(self.document.body).find('.prompt-line-cxmooc-notice').length > 0) {\r\n            el = $(self.document.body).find('.prompt-line-cxmooc-notice')[0];\r\n        } else {\r\n            el = util.createLine(text, 'cxmooc-notice');\r\n            $(el).css('text-align', 'center');\r\n            $(self.document.body).prepend(el);\r\n        }\r\n        $(el).text(text);\r\n    }\r\n\r\n    this.exam = function () {\r\n        Exam.exam();\r\n    }\r\n\r\n    this.collectExam = function () {\r\n        Exam.collect();\r\n    }\r\n    return this;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/cxmooc-tools/chaoxing/chaoxing.js?");

/***/ }),

/***/ "./src/cxmooc-tools/chaoxing/exam.js":
/*!*******************************************!*\
  !*** ./src/cxmooc-tools/chaoxing/exam.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const util = __webpack_require__(/*! ./util */ \"./src/cxmooc-tools/chaoxing/util.js\");\r\nconst common = __webpack_require__(/*! ../common */ \"./src/cxmooc-tools/common.js\");\r\nconst moocServer = __webpack_require__(/*! ../../config */ \"./src/config.js\");\r\n\r\nmodule.exports = {\r\n    notic: undefined,\r\n    getTopic: function () {\r\n        let topic = $('.Cy_TItle.clearfix .clearfix');\r\n        if (topic.length <= 0) {\r\n            this.notic.text('未搜索到题目');\r\n            return undefined;\r\n        }\r\n        let text = common.removeHTML($(topic).html());\r\n        text = text.substr(0, text.lastIndexOf('分)'));\r\n        text = text.substr(0, text.lastIndexOf('('));\r\n        return text;\r\n    },\r\n    exam: function () {\r\n        //生成按钮\r\n        let self = this;\r\n        let btn = util.createBtn('搜索答案', '搜索题目答案');\r\n        $('.Cy_ulBottom.clearfix.w-buttom,.Cy_ulTk,.Cy_ulBottom.clearfix').after(btn);\r\n        btn.onclick = function () {\r\n            //搜索答案\r\n            self.notic = util.signleLine('搜索答案中...', 'answer', btn.parentElement);\r\n            let topic = self.getTopic();\r\n            if (topic == undefined) {\r\n                return false;\r\n            }\r\n            common.gm_post(moocServer.url + 'v2/answer', 'topic[0]=' + topic, false, function (data) {\r\n                let json = JSON.parse(data);\r\n                if (json[0].result.length <= 0) {\r\n                    return self.notic.text('未找到答案');\r\n                }\r\n                let answer = json[0].result[Math.floor(Math.random() * Math.floor(json[0].result.length))];\r\n                //填充\r\n                self.fillAnswer(answer);\r\n            }).error(function () {\r\n                self.notic.text('网络错误');\r\n            });\r\n            return false;\r\n        }\r\n        if (config.auto) {\r\n            btn.onclick();\r\n        }\r\n    },\r\n    fillAnswer: function (answer) {\r\n        let correct = answer.correct;\r\n        switch (answer.type) {\r\n            case 1:\r\n            case 2: {\r\n                let options = $('.Cy_ulBottom.clearfix.w-buttom li input');\r\n                if (options.length <= 0) {\r\n                    this.notic.text('答案搜索错误');\r\n                    return false;\r\n                }\r\n                let noticText = '';\r\n                $(options).removeAttr('checked');\r\n                for (let i = 0; i < correct.length; i++) {\r\n                    let index = (correct[i].option.charCodeAt() | 32) - 97;\r\n                    // $(options[index]).attr('checked', true);\r\n                    $(options[index]).click();\r\n                    noticText += correct[i].option + ':' + correct[i].content + '<br/>';\r\n                }\r\n                $(this.notic).html(noticText);\r\n                break;\r\n            }\r\n            case 3: {\r\n                let options = $('.Cy_ulBottom.clearfix li input');\r\n                if (options.length <= 0) {\r\n                    this.notic.text('答案搜索错误');\r\n                    return false;\r\n                }\r\n                $(options).removeAttr('checked');\r\n                let index = 1;\r\n                if (correct[0].option) {\r\n                    index = 0;\r\n                }\r\n                // $(options[index]).attr('checked', true);\r\n                $(options[index]).click();\r\n                $(this.notic).html('答案:' + correct[0].option);\r\n                break;\r\n            }\r\n            case 4: {\r\n                let options = $('.Cy_ulTk .XztiHover1');\r\n                if (options.length <= 0) {\r\n                    this.notic.text('答案搜索错误');\r\n                    return false;\r\n                }\r\n                let notic = '';\r\n                for (let i = 0; i < options.length; i++) {\r\n                    let pos = common.substrEx($(options[i]).find('.fb.font14').text(), '第', '空');\r\n                    for (let n = 0; n < correct.length; n++) {\r\n                        if (correct[n].option == pos) {\r\n                            notic += ' 第' + pos + '空:' + correct[n].content + '<br/>';\r\n                            var uedit = $(options[n]).find('textarea');\r\n                            if (uedit.length <= 0) {\r\n                                this.notic.text('答案搜索错误');\r\n                                return false;\r\n                            }\r\n                            UE.getEditor(uedit.attr('name')).setContent(correct[n].content);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                $(this.notic).html(notic);\r\n                break;\r\n            }\r\n            default: {\r\n                this.notic.text('不支持的答案类型:' + JSON.stringify(correct));\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    collect: function () {\r\n        let timu = $('.TiMu');\r\n        let answer = [];\r\n        for (let i = 0; i < timu.length; i++) {\r\n            let topic = $(timu[i]).find('.Cy_TItle.clearfix .clearfix');\r\n            if (topic.length <= 0) {\r\n                continue;\r\n            }\r\n            let correct = $(timu[i]).find('.Py_answer.clearfix,.Py_tk');\r\n            if ($(correct).text().indexOf('正确答案') >= 0 ||\r\n                $(correct).find('dui').length > 0) {\r\n                correct = common.removeHTML($(correct).html());\r\n            } else {\r\n                continue;\r\n            }\r\n            let topicText = common.removeHTML(topic.html());\r\n            topicText = topicText.substr(0, topicText.lastIndexOf('('));\r\n            let options = $(timu[i]).find('.Cy_ulTop li');\r\n            let pushOption = { topic: topicText, answer: [], correct: [] };\r\n            if (options.length <= 0) {\r\n                //非选择\r\n                let is = false;\r\n                if ((is = correct.indexOf('√')) > 0 || correct.indexOf('×') > 0) {\r\n                    if (is > 0) {\r\n                        pushOption.correct.push({ option: true, content: true });\r\n                    } else {\r\n                        pushOption.correct.push({ option: false, content: false });\r\n                    }\r\n                    pushOption.type = 3\r\n                } else {\r\n                    let options = $(timu[i]).find('.font14.clearfix');\r\n                    for (let n = 0; n < options.length; n++) {\r\n                        let option = $(options[n]).find('.fb.fl').text();\r\n                        if (option == null) {\r\n                            break;\r\n                        }\r\n                        option = common.substrEx(option, '第', '空');\r\n                        let content = $(options[n]).find('div.fl').html();\r\n                        pushOption.correct.push({ option: option, content: common.removeHTML(content) });\r\n                    }\r\n                    pushOption.type = 4;\r\n                }\r\n            } else {\r\n                let correctText = correct.match(/\\w+/);\r\n                if (correctText == null) {\r\n                    continue;\r\n                }\r\n                correctText = correctText[0];\r\n                for (let n = 0; n < options.length; n++) {\r\n                    let option = $(options[n]).find('.fl').text().replace('、', '');\r\n                    let tmp = {\r\n                        option: $(options[n]).find('.fl').text().replace('、', ''),\r\n                        content: common.removeHTML($(options[n]).find('.clearfix').html())\r\n                    };\r\n                    if (correctText.indexOf(option) >= 0) {\r\n                        pushOption.correct.push(tmp);\r\n                    }\r\n                    pushOption.answer.push(tmp);\r\n                }\r\n                pushOption.type = correctText.length <= 1 ? 1 : 2;\r\n            }\r\n            answer.push(pushOption);\r\n        }\r\n        let box = util.pop_prompt(\"√  答案自动记录成功\");\r\n        $(document.body).append(box);\r\n        setTimeout(function () { box.style.opacity = \"1\"; }, 500);\r\n        common.gm_post(moocServer.url + 'answer', JSON.stringify(answer), true);\r\n    }\r\n};\n\n//# sourceURL=webpack:///./src/cxmooc-tools/chaoxing/exam.js?");

/***/ }),

/***/ "./src/cxmooc-tools/chaoxing/topic.js":
/*!********************************************!*\
  !*** ./src/cxmooc-tools/chaoxing/topic.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const common = __webpack_require__(/*! ../common */ \"./src/cxmooc-tools/common.js\");\r\nconst until = __webpack_require__(/*! ./util */ \"./src/cxmooc-tools/chaoxing/util.js\");\r\nconst moocServer = __webpack_require__(/*! ../../config */ \"./src/config.js\");\r\n\r\nmodule.exports = function () {\r\n    let self = this;\r\n    this.iframe = undefined;\r\n    this.document = undefined;\r\n    this.complete = undefined;\r\n    this.loadover = undefined;\r\n    this.hangBtn = undefined;\r\n    this.pause = true;\r\n\r\n    this.searchAnswer = function () {\r\n        if (self.pause) {\r\n            self.pause = false;\r\n            config.auto && $(self.hangBtn).text('暂停挂机');\r\n        } else {\r\n            self.pause = true;\r\n            $(self.hangBtn).text('搜索题目');\r\n            return;\r\n        }\r\n        let TiMu = $(self.document).find('.Zy_TItle.clearfix');\r\n        let topic = [];\r\n        for (let i = 0; i < TiMu.length; i++) {\r\n            topic.push(dealTopicInfo(TiMu[i]));\r\n        }\r\n        let data = '';\r\n        for (let i in topic) {\r\n            data += 'topic[' + i + ']=' + topic[i].topic + '&type[' + i + ']=' + topic[i].type + '&';\r\n        }\r\n        common.gm_post(moocServer.url + 'v2/answer', data, false, function (data) {\r\n            let json = JSON.parse(data);\r\n            let answer_null = false;\r\n            for (let i = 0; i < json.length; i++) {\r\n                if (fillTopic(TiMu, json[i], topic) == false) {\r\n                    answer_null = true;\r\n                }\r\n            }\r\n            if (answer_null) {\r\n                //切换下一个任务点\r\n                $(self.hangBtn).text('答案不全跳过');\r\n                self.complete();\r\n                return;\r\n            }\r\n            common.log(self.iframe.className + \" topic complete\")\r\n            if (config.auto) {\r\n                self.complete(1);\r\n            } else {\r\n                self.complete();\r\n            }\r\n        }).error(function () {\r\n            common.log(self.iframe.className + \" topic error\")\r\n            $(self.hangBtn).text('网络错误跳过');\r\n            self.complete();\r\n        });\r\n    }\r\n\r\n    this.pushTopic = function () {\r\n        if (self.pause) {\r\n            return;\r\n        }\r\n        //提交操作\r\n        let confirm = function () {\r\n            let prompt = $(self.document).find('#tipContent').text();\r\n            if (prompt.indexOf('未做完') > 0) {\r\n                alert('提示:' + prompt);\r\n                return;\r\n            }\r\n            let timer = setInterval(function () {\r\n                prompt = document.getElementById('validate');\r\n                if (prompt.style.display != 'none') {\r\n                    //等待验证码接管\r\n                    return;\r\n                }\r\n                clearInterval(timer);\r\n                //确定提交\r\n                let submit = $(self.document).find('.bluebtn');\r\n                submit[0].click();\r\n            }, 2000);\r\n        }\r\n        let submit = function () {\r\n            let submit = $(self.document).find('.Btn_blue_1');\r\n            submit[0].click();\r\n            setTimeout(confirm, 2000);\r\n        }\r\n        setTimeout(submit, 1000);\r\n        //判断有没有未填的题目\r\n    }\r\n\r\n\r\n    /**\r\n     * 创建按钮\r\n     */\r\n    this.createButton = function () {\r\n        self.hangBtn = until.createBtn('搜索题目', '点击自动从网络上的题库中查找答案');\r\n        let prev = $(self.iframe).prev();\r\n        if (prev.length <= 0) {\r\n            prev = $(self.iframe).parent();\r\n            $(prev).prepend(self.hangBtn);\r\n        } else {\r\n            $(prev).append(self.hangBtn);\r\n        }\r\n        until.dealTaskLabel(prev);\r\n        self.hangBtn.onclick = self.searchAnswer;\r\n    }\r\n\r\n    this.init = function () {\r\n        self.document = $(self.iframe.contentDocument).find('#frame_content')[0].contentDocument;\r\n        listenIframe();\r\n        reloadInit() && self.loadover && self.loadover(self);\r\n    }\r\n\r\n    function reloadInit() {\r\n        common.log(self.iframe.className + \" topic reload init\")\r\n        if (until.isFinished(self.iframe)) {\r\n            self.collect();\r\n        } else {\r\n            self.createButton();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    //监听框架,跳转抓取题目\r\n    function listenIframe() {\r\n        $($(self.iframe.contentDocument).find('#frame_content')[0]).on(\"load\", function () {\r\n            common.log(\"topic load \" + this.contentWindow.location.href);\r\n            if (this.contentWindow.location.href.indexOf('selectWorkQuestionYiPiYue') > 0) {\r\n                self.document = this.contentDocument;\r\n                reloadInit();\r\n            }\r\n        });\r\n    }\r\n\r\n    this.start = function () {\r\n        common.log(self.iframe.className + \" topic start\")\r\n        self.searchAnswer();\r\n    }\r\n\r\n    /**\r\n     * 收集题目\r\n     */\r\n    this.collect = function () {\r\n        let TiMu = $(self.document).find('.TiMu');\r\n        let answer = [];\r\n        for (let i = 0; i < TiMu.length; i++) {\r\n            let tmp = getAnswerInfo(TiMu[i]);\r\n            if (tmp == {}) {\r\n                continue;\r\n            }\r\n            answer.push(tmp);\r\n        }\r\n        let box = until.pop_prompt(\"√  答案自动记录成功\");\r\n        $(document.body).append(box);\r\n        setTimeout(function () { box.style.opacity = \"1\"; }, 500);\r\n        common.gm_post(moocServer.url + 'answer', JSON.stringify(answer), true, function () {\r\n            common.log(self.iframe.className + \" topic answer complete\")\r\n            self.complete(2);\r\n        }).error(function () {\r\n            common.log(self.iframe.className + \" topic answer complete\")\r\n            self.complete(2);\r\n        });\r\n    }\r\n    return this;\r\n}\r\n\r\n/**\r\n * 获取题目信息\r\n * @param {*} TiMu \r\n */\r\nfunction getAnswerInfo(TiMu) {\r\n    let answer = $(TiMu).find('.Zy_TItle.clearfix');\r\n    let correct = $(TiMu).find('.Py_answer.clearfix');\r\n    if (correct.length <= 0) {\r\n        return {};\r\n    }\r\n    if ($(correct).html().indexOf('正确答案') < 0) {\r\n        if ($(correct).find('.fr.dui').length <= 0 || $(correct).find('.fr.bandui').length) {\r\n            return {};\r\n        }\r\n    }\r\n    //验证正确\r\n    let title = $(answer).find('.clearfix');\r\n    let type = switchTopicType(common.substrEx(title.text(), '【', '】'));\r\n    let topic = common.removeHTML(title.html().substring(title.html().indexOf('】') + 1));\r\n    let options = $(TiMu).find('.Zy_ulTop .clearfix');\r\n    let ret = {\r\n        answers: [],\r\n        correct: []\r\n    };\r\n    let tmpAnswer = $(correct).find('span')[0];\r\n    tmpAnswer = $(tmpAnswer).text();\r\n    switch (type) {\r\n        case 1: case 2: {\r\n            for (let i = 0; i < options.length; i++) {\r\n                let option = $(options[i]).find('i.fl').text().substring(0, 1);\r\n                let tmp = { option: option, content: common.removeHTML($(options[i]).find('a.fl').text()) };\r\n                ret.answers.push(tmp);\r\n                if (tmpAnswer.indexOf(option) > 0) {\r\n                    ret.correct.push(tmp);\r\n                }\r\n            }\r\n            break;\r\n        } case 3: {\r\n            if (tmpAnswer.indexOf('×') >= 0) {\r\n                ret.correct.push({ option: false, content: false });\r\n            } else {\r\n                ret.correct.push({ option: true, content: true });\r\n            }\r\n            break;\r\n        } case 4: {\r\n            let isMy = false;\r\n            options = $(TiMu).find('.Py_tk span.font14');\r\n            if (options.length <= 0) {\r\n                isMy = true;\r\n                options = $(TiMu).find('.Py_answer.clearfix');\r\n            }\r\n            for (let i = 0; i < options.length; i++) {\r\n                if (isMy) {\r\n                    if ($(options[i]).find('.fr.dui').length <= 0) {\r\n                        continue;\r\n                    }\r\n                }\r\n                let option = $(options[i]).find('i.fl').text();\r\n                option = common.substrEx(option, \"第\", \"空\");\r\n                let content = $(options[i]).find('.clearfix').text();\r\n                ret.correct.push({ option: option, content: common.removeHTML(content) });\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    ret.topic = topic;\r\n    ret.type = type;\r\n    return ret;\r\n}\r\n\r\n/**\r\n * 处理题目信息\r\n * @param {*} elTopic \r\n */\r\nfunction dealTopicInfo(elTopic) {\r\n    let msg = {};\r\n    let topic = $(elTopic).find('div.clearfix');\r\n    if (topic.length <= 0) {\r\n        console.log(elTopic);\r\n        return msg;\r\n    }\r\n    msg.topic = topic[0].innerHTML;\r\n    msg.type = switchTopicType(common.substrEx(msg.topic, '【', '】'));\r\n    msg.topic = common.removeHTML(msg.topic.substring(msg.topic.indexOf('】') + 1));\r\n    return msg;\r\n}\r\n\r\n/**\r\n  * 题目类型\r\n  * @param {*} typeTtile \r\n  */\r\nfunction switchTopicType(typeTtile) {\r\n    let type = typeTtile;\r\n    switch (type) {\r\n        case '单选题': {\r\n            type = 1;\r\n            break;\r\n        }\r\n        case '多选题': {\r\n            type = 2;\r\n            break;\r\n        }\r\n        case '判断题': {\r\n            type = 3;\r\n            break;\r\n        }\r\n        case '填空题': {\r\n            type = 4;\r\n            break;\r\n        }\r\n        default: {\r\n            type = -1;\r\n            break;\r\n        }\r\n    }\r\n    return type;\r\n}\r\n\r\n/**\r\n * 填充题目答案\r\n */\r\nfunction fillTopic(TiMu, answer, sourceTopic) {\r\n    let rand = false;\r\n    let optionEl = $(TiMu[answer.index]).next();\r\n    $(optionEl).next().find('p').remove();\r\n    let result = selectAnswer(answer.result, sourceTopic[answer.index]);\r\n    if (result.length <= 0) {\r\n        if (config.rand_answer == true) {\r\n            result = genRandAnswer(sourceTopic[answer.index].type);\r\n            rand = true;\r\n        } else {\r\n            until.createLine('没有答案', 'answer', $(optionEl).next());\r\n            return false;\r\n        }\r\n        if (result.correct.length <= 0) {\r\n            until.createLine('不支持的随机答案类型', 'answer', $(optionEl).next());\r\n            return false;\r\n        } else {\r\n            until.createLine('这是随机生成的答案', 'answer', $(optionEl).next());\r\n        }\r\n    }\r\n    let options = {}\r\n    switch (result.type) {\r\n        case 1: case 2: case 3: {\r\n            options = $(optionEl).find('label>input');\r\n            break;\r\n        }\r\n        case 4: {\r\n            options = $(optionEl).find('li');\r\n        }\r\n    }\r\n    for (let i = 0; i < result.correct.length; i++) {\r\n        switch (result.type) {\r\n            case 1: case 2: {\r\n                for (let n = 0; n < options.length; n++) {\r\n                    let content = $(options[n]).parent().next()[0];\r\n                    if (options[n].value == result.correct[i].option ||\r\n                        common.removeHTML($(content).text()) == result.correct[i].content\r\n                    ) {\r\n                        if (!$(options[n]).attr('checked')) {\r\n                            options[n].click();\r\n                        }\r\n                        until.createLine(options[n].value + ':' + $(content).text(), 'answer', $(optionEl).next());\r\n                        options.splice(n, 1);\r\n                        break;\r\n                    } else if ($(options[n]).attr('checked')) {\r\n                        options[n].click();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case 3: {\r\n                if (result.correct[0].option) {\r\n                    options[0].click();\r\n                    until.createLine('对√', 'answer', $(optionEl).next());\r\n                } else {\r\n                    options[1].click();\r\n                    until.createLine('错×', 'answer', $(optionEl).next());\r\n                }\r\n                break;\r\n            }\r\n            case 4: {\r\n                for (let n = 0; n < options.length; n++) {\r\n                    if (common.substrEx(options[n].innerText, '第', '空') == result.correct[i].option) {\r\n                        $(options[n]).find('.inp').val(result.correct[i].content);\r\n                        until.createLine(options[n].innerText + ':' + result.correct[i].content, 'answer', $(optionEl).next());\r\n                        options.splice(n, 1);\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            default: {\r\n                until.createLine('不支持的类型', 'answer', $(optionEl).next());\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * 生成随机答案\r\n */\r\nfunction genRandAnswer(type) {\r\n    let ret = { correct: [], type: type };\r\n    if (type == 1) {\r\n        ret.correct.push({ option: String.fromCharCode(65 + common.randNumber(0, 3)), content: '' });\r\n    } else if (type == 2) {\r\n        let list = ['A', 'B', 'C', 'D'];\r\n        let len = common.randNumber(2, 4);\r\n        for (let i = 0; i < len; i++) {\r\n            let pos = common.randNumber(0, list.length - 1);\r\n            ret.correct.push({ option: list[pos], content: '' });\r\n            list.splice(pos, 1);\r\n        }\r\n    } else if (type == 3) {\r\n        let answer = common.randNumber(0, 1) == 0 ? false : true;\r\n        ret.correct.push({ option: answer, content: answer });\r\n    }\r\n    return ret;\r\n}\r\n\r\n/**\r\n * 选择题目\r\n * @param {*} answers \r\n * @param {*} oldTopic \r\n */\r\nfunction selectAnswer(answers, oldTopic) {\r\n    for (let i = 0; i < answers.length; i++) {\r\n        if (answers[i].type == oldTopic.type) {\r\n            return answers[i];\r\n        }\r\n    }\r\n    return [];\r\n}\n\n//# sourceURL=webpack:///./src/cxmooc-tools/chaoxing/topic.js?");

/***/ }),

/***/ "./src/cxmooc-tools/chaoxing/util.js":
/*!*******************************************!*\
  !*** ./src/cxmooc-tools/chaoxing/util.js ***!
  \*******************************************/
/*! exports provided: createBtn, dealTaskLabel, createLine, signleLine, isFinished, isTask, pop_prompt, getAnswer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createBtn\", function() { return createBtn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dealTaskLabel\", function() { return dealTaskLabel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createLine\", function() { return createLine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"signleLine\", function() { return signleLine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isFinished\", function() { return isFinished; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isTask\", function() { return isTask; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pop_prompt\", function() { return pop_prompt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAnswer\", function() { return getAnswer; });\nconst chaoxing = __webpack_require__(/*! ./chaoxing */ \"./src/cxmooc-tools/chaoxing/chaoxing.js\");\r\n\r\n/**\r\n * 创建一个按钮\r\n * @param {*} title \r\n */\r\nfunction createBtn(title, description = '', id = '') {\r\n    let btn = document.createElement('button');\r\n    btn.innerText = title;\r\n    btn.id = id;\r\n    btn.style.outline = 'none';\r\n    btn.style.border = '0';\r\n    btn.style.background = '#7d9d35';\r\n    btn.style.color = '#fff';\r\n    btn.style.borderRadius = '4px';\r\n    btn.style.padding = '2px 8px';\r\n    btn.style.cursor = 'pointer';\r\n    btn.style.fontSize = '12px';\r\n    btn.style.marginLeft = '4px';\r\n    btn.title = description;\r\n    btn.onmousemove = () => {\r\n        btn.style.boxShadow = '1px 1px 1px 1px #ccc';\r\n    };\r\n    btn.onmouseout = () => {\r\n        btn.style.boxShadow = '';\r\n    };\r\n    return btn;\r\n}\r\n\r\n/**\r\n * 处理任务点标签\r\n * @param string label \r\n */\r\nfunction dealTaskLabel(label) {\r\n    $(label).css('text-align', 'center');\r\n    $(label).css('width', 'auto');\r\n    let span = $(label).find('span');\r\n    span.css('width', 'auto');\r\n    span.css('margin-left', '0');\r\n}\r\n\r\n/**\r\n * 创建一行\r\n * @param {string} text \r\n */\r\nfunction createLine(text, label, append) {\r\n    let p = $('<p></p>');\r\n    p.css('color', 'red');\r\n    p.css('font-size', '14px');\r\n    p.attr('class', 'prompt-line-' + label);\r\n    p.text(text);\r\n    if (append != undefined) {\r\n        $(append).append(p);\r\n    }\r\n    return p;\r\n}\r\n\r\nfunction signleLine(text, label, append) {\r\n    let p = $('.prompt-line-' + label);\r\n    if (p.length <= 0) {\r\n        p = createLine(text, label, append);\r\n    } else {\r\n        $(p).text(text);\r\n    }\r\n    p.text=function(text){\r\n        $(this).text(text);\r\n    }\r\n    return p;\r\n}\r\n\r\nfunction isFinished(el) {\r\n    if ($(el).parents('.ans-attach-ct.ans-job-finished').length > 0) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction isTask(el) {\r\n    if ($(el).parents('.ans-attach-ct').find('.ans-job-icon').length > 0) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\nfunction pop_prompt(text, sec = 4) {\r\n    var box = document.createElement('div');\r\n    box.style.position = \"fixed\";\r\n    box.style.background = \"#aeffab\";\r\n    box.style.fontSize = \"18px\";\r\n    box.style.padding = \"4px 20px\";\r\n    box.style.borderRadius = \"20px\";\r\n    box.style.top = \"50%\";\r\n    box.style.left = \"50%\";\r\n    box.style.transform = \"translate(-50%,-50%)\";\r\n    box.style.transition = \"1s\";\r\n    box.style.opacity = \"0\";\r\n    box.innerText = text;\r\n    setTimeout(function () {\r\n        box.style.opacity = \"0\";\r\n        setTimeout(function () {\r\n            box.remove();\r\n        }, 1000)\r\n    }, sec * 1000);\r\n    return box;\r\n}\r\n\r\nfunction getAnswer(){\r\n\r\n}\n\n//# sourceURL=webpack:///./src/cxmooc-tools/chaoxing/util.js?");

/***/ }),

/***/ "./src/cxmooc-tools/chaoxing/vcode.js":
/*!********************************************!*\
  !*** ./src/cxmooc-tools/chaoxing/vcode.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const common = __webpack_require__(/*! ../common */ \"./src/cxmooc-tools/common.js\");\r\nconst serverConfig = __webpack_require__(/*! ../../config */ \"./src/config.js\");\r\nconst until = __webpack_require__(/*! ./util */ \"./src/cxmooc-tools/chaoxing/util.js\");\r\n\r\nmodule.exports = function () {\r\n    let self = this;\r\n    this.monitorVcode = function () {\r\n        //验证码监控加载\r\n        //作业处验证码\r\n        if (document.getElementById('imgVerCode')) {\r\n            $('#imgVerCode').on('load', function () {\r\n                if($('#imgVerCode').attr('src').indexOf('?')<0){\r\n                    //节约可能的一次打码\r\n                    return;\r\n                }\r\n                console.log('准备打码...');\r\n                let notic = until.signleLine('cxmooc自动打码中...', 'dama', $('#sub').parents('td'));\r\n                let img = document.getElementById('imgVerCode');\r\n                getVcode('/img/code?' + new Date().getTime(), img, function (code, msg) {\r\n                    if (code === undefined) {\r\n                        $(notic).html(msg);\r\n                        return;\r\n                    }\r\n                    $(notic).html('cxmooc打码成功,准备提交');\r\n                    $('input#code').val(code);\r\n                    setTimeout(function () {\r\n                        $('a#sub').click();\r\n                    }, 2000);\r\n                }, true);\r\n            });\r\n        }\r\n        //异常验证码\r\n        let yc = document.getElementById('ccc');\r\n        if (yc != undefined) {\r\n            yc.onclick = function () {\r\n                getVcode('/processVerifyPng.ac?t=' + Math.floor(2147483647 * Math.random()), yc, function (code, msg) {\r\n                    if (code === undefined) {\r\n                        alert(msg);\r\n                        return;\r\n                    }\r\n                    document.getElementById('ucode').value = code;\r\n                    setTimeout(function () {\r\n                        document.getElementsByClassName('submit')[0].click();\r\n                    }, 2000);\r\n                });\r\n            }\r\n        }\r\n        //保障账号安全验证码\r\n        window.showChapterVerificationCodeTip = window.showChapterVerificationCode || 0;\r\n        window.chapterVerifyCode = function () {\r\n            let notic = until.signleLine('cxmooc自动打码中...', 'dama1', $('.DySearch'));\r\n            $(notic).css('float', 'left');\r\n            let img = $('.fl[name=chapterNumVerCode]');\r\n            if (img.length <= 0) {\r\n                return;\r\n            }\r\n            img = img[0];\r\n            getVcode('/verifyCode/studychapter?' + (new Date()).valueOf(), img, function (code, msg) {\r\n                if (code === undefined) {\r\n                    $(notic).html(msg);\r\n                    return;\r\n                }\r\n                $(notic).html('cxmooc打码成功,准备提交');\r\n                $('input#identifyCodeRandom').val(code);\r\n                setTimeout(function () {\r\n                    continueGetTeacherAjax();\r\n                }, 2000);\r\n            });\r\n        }\r\n    }\r\n\r\n    function getVcode(url, img, callback, show) {\r\n        let vcodeimg = show ? img : document.createElement('img');\r\n        let dmStart = function () {\r\n            let base64 = common.getImageBase64(vcodeimg, 'jpeg');\r\n            if (!show) {\r\n                img.src = base64;\r\n            }\r\n            common.gm_post(serverConfig.url + 'vcode', 'img=' + encodeURIComponent(base64.substr('data:image/jpeg;base64,'.length)), false, function (ret) {\r\n                let json = JSON.parse(ret);\r\n                if (json.code == -2) {\r\n                    callback(undefined, json.msg);\r\n                    //TODO:无权限\r\n                } else if (json.msg) {\r\n                    callback(json.msg);\r\n                } else {\r\n                    getVcode(url, img, callback);\r\n                }\r\n            }).error(function () {\r\n                callback(undefined, '网络请求失败');\r\n            });\r\n        }\r\n        if (show) {\r\n            dmStart();\r\n        } else {\r\n            vcodeimg.onload = dmStart;\r\n            vcodeimg.src = url;\r\n        }\r\n    }\r\n\r\n    self.monitorVcode();\r\n\r\n}\n\n//# sourceURL=webpack:///./src/cxmooc-tools/chaoxing/vcode.js?");

/***/ }),

/***/ "./src/cxmooc-tools/chaoxing/video.js":
/*!********************************************!*\
  !*** ./src/cxmooc-tools/chaoxing/video.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const common = __webpack_require__(/*! ../common */ \"./src/cxmooc-tools/common.js\");\r\nconst until = __webpack_require__(/*! ./util */ \"./src/cxmooc-tools/chaoxing/util.js\");\r\nconst md5 = __webpack_require__(/*! md5 */ \"./node_modules/md5/md5.js\");\r\n\r\nmodule.exports = function () {\r\n    let self = this;\r\n    /** 框架document */\r\n    this.iframe = undefined;\r\n    this.document = undefined;\r\n    this.video = undefined;\r\n    this.videoMsg = undefined;\r\n    this.complete = undefined;\r\n    this.loadover = undefined;\r\n    this.mArg = undefined;\r\n    this.pause = true;\r\n    this.hangBtn = undefined;\r\n\r\n    /**\r\n     * 初始化显示视频题目\r\n     */\r\n    function initVideoTopic() {\r\n        common.get('/richvideo/initdatawithviewer?&start=undefined&mid=' + self.videoMsg['mid'],\r\n            function (data) {\r\n                let json = JSON.parse(data);\r\n                let div = createDiv('本视频题目列表:<br/>');\r\n                $(self.iframe).after(div);\r\n                for (let i = 0; i < json.length; i++) {\r\n                    let answer = getTrueAnswer(json[i].datas[0].options);\r\n                    let title = '题目' + (i + 1) + ':' + json[i].datas[0].description + '<br/>答案:   ' + answer + '<br/>';\r\n                    $(div).append(title);\r\n                }\r\n                if (json.length <= 0) {\r\n                    let title = '没有题目<br/>';\r\n                    $(div).append(title);\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 移除初始页面\r\n     */\r\n    function unshowOcclusion() {\r\n        $(self.document).find('.vjs-big-play-button').css('display', 'none');\r\n        $(self.document).find('.vjs-poster').css('display', 'none');\r\n    }\r\n\r\n    function initCdn() {\r\n        let cdn = undefined;\r\n        if (localStorage['cdn'] != undefined) {\r\n            cdn = $(self.document).find(\"[title='Playline']+.vjs-menu .vjs-menu-content .vjs-menu-item .vjs-menu-item-text:contains('\" +\r\n                localStorage['cdn'] + \"')\");\r\n        }\r\n        if (cdn == undefined || cdn.length <= 0) {\r\n            cdn = $(self.document).find(\"[title='Playline']+.vjs-menu .vjs-menu-content .vjs-menu-item .vjs-menu-item-text\");\r\n        }\r\n        cdn = cdn[0];\r\n        $(cdn).parent().click();\r\n    }\r\n\r\n    /**\r\n     * 初始化播放器\r\n     */\r\n    this.initPlayer = function () {\r\n        self.video = $(self.document).find('#video_html5_api')[0];\r\n        self.iframe.contentWindow.Ext.fly(self.document).un('mouseout');\r\n        let html = $(self.iframe).parents('body')[0].innerHTML;\r\n        self.mArg = JSON.parse('{' + common.substrEx(html, 'mArg = {', ';'));\r\n        for (let i = 0; i < self.mArg.attachments.length; i++) {\r\n            if (self.mArg.attachments[i].objectId == $(self.iframe).attr('objectid')) {\r\n                self.videoMsg = self.mArg.attachments[i];\r\n                break;\r\n            }\r\n        }\r\n        initVideoTopic();\r\n        initCdn(self.video);\r\n        //点击切换记录cdn\r\n        $(self.document).find(\"[title='Playline']+.vjs-menu .vjs-menu-content .vjs-menu-item-text\").click(function () {\r\n            localStorage['cdn'] = $(this).text();\r\n        });\r\n        //失败的切换记录\r\n        $(self.document).find('.vjs-error-display.vjs-modal-dialog').on('click','.ans-vjserrdisplay-opts li.ans-vjserrdisplay-opt label\"',function(){\r\n            localStorage['cdn'] = $(this).text();\r\n        });\r\n        let play = function () {\r\n            //静音和倍速选项\r\n            self.video.muted = config.video_mute;\r\n            self.video.playbackRate = config.video_multiple;\r\n            self.loadover && self.loadover(self);\r\n        }\r\n        $(self.video).on('loadstart', play);\r\n\r\n        $(self.video).on('pause', function () {\r\n            if (self.video.currentTime <= self.video.duration - 1) {\r\n                if (!self.pause) {\r\n                    $(self.document).find('.x-container.ans-timelineobjects.x-container-default,.ans-timelineobjectsbg').css('display', 'none');\r\n                    self.video.play();\r\n                }\r\n            }\r\n        });\r\n        let tag = Math.random();\r\n        localStorage['now_video_tag'] = tag;\r\n        let pauseTimer = setInterval(function () {\r\n            //以防万一的暂停- -\r\n            if (!self.pause && localStorage['now_video_tag'] == tag) {\r\n                self.video.paused && self.video.play();\r\n            } else if (localStorage['now_video_tag'] != tag) {\r\n                clearInterval(pauseTimer);\r\n            }\r\n        }, 10000);\r\n\r\n        $(self.video).on('ended', function () {\r\n            if (undefined != self.complete) {\r\n                self.complete();\r\n            }\r\n            clearInterval(pauseTimer);\r\n        });\r\n    }\r\n\r\n    this.start = function () {\r\n        common.log(self.iframe.className + \" video start\")\r\n        self.startPlay();\r\n    }\r\n\r\n    /**\r\n     * 开始播放\r\n     */\r\n    this.startPlay = function () {\r\n        if (self.pause) {\r\n            $(self.hangBtn).text('暂停挂机');\r\n        } else {\r\n            $(self.hangBtn).text('开始挂机');\r\n        }\r\n        self.pause = !self.pause;\r\n        unshowOcclusion();\r\n        setTimeout(function () {\r\n            self.video.play();\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * 秒过视频\r\n     */\r\n    this.passVideo = function () {\r\n        if (localStorage['boom_no_prompt'] == undefined || localStorage['boom_no_prompt'] != 1) {\r\n            let msg = prompt('秒过视频会产生不良记录,是否继续?如果以后不想再弹出本对话框请在下方填写yes')\r\n            if (msg === null) return;\r\n            if (msg === 'yes') localStorage['boom_no_prompt'] = 1;\r\n        }\r\n        sendTimePack(self.mArg, self.videoMsg, self.video.duration, function (ret) {\r\n            if (ret == true) {\r\n                alert('秒过成功,刷新后查看效果');\r\n            } else {\r\n                alert('操作失败,错误');\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 下载视频\r\n     */\r\n    this.downloadVideo = function () {\r\n        window.open($(self.video).attr('src'));\r\n    }\r\n\r\n    /**\r\n     * 创建按钮\r\n     */\r\n    this.createButton = function () {\r\n        self.hangBtn = until.createBtn('开始挂机', '点击开始自动挂机播放视频');\r\n        let pass = until.createBtn('秒过视频', '秒过视频会被后台检测到');\r\n        let download = until.createBtn('下载视频', '我要下载视频好好学习');\r\n        pass.style.background = '#F57C00';\r\n        download.style.background = '#999999';\r\n        let prev = $(self.iframe).prev();\r\n        until.dealTaskLabel(prev);\r\n        $(prev).append(self.hangBtn);\r\n        $(prev).append(pass);\r\n        $(prev).append(download);\r\n        self.hangBtn.onclick = self.startPlay;\r\n        pass.onclick = self.passVideo;\r\n        download.onclick = self.downloadVideo;\r\n    }\r\n\r\n    this.init = function () {\r\n        self.document = self.iframe.contentDocument;\r\n        self.createButton();\r\n        let timer = setInterval(function () {\r\n            if ($(self.document).find('#video_html5_api').length > 0) {\r\n                clearInterval(timer);\r\n                self.initPlayer();\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    return this;\r\n}\r\n\r\n/**\r\n * 获取视频信息\r\n * @param {string} objectId \r\n */\r\nfunction getVideoInfo(objectId, schoolId, success) {\r\n    common.get('/ananas/status/' + objectId + '?k=' + schoolId + '&_dc=' + Date.parse(new Date()),\r\n        function (data) {\r\n            var json = JSON.parse(data);\r\n            success(json);\r\n        });\r\n}\r\n\r\n/**\r\n * 发送视频时间包\r\n */\r\nfunction sendTimePack(mArg, videoMsg, playTime, success) {\r\n    getVideoInfo(videoMsg.objectId, mArg.defaults.fid, function (videoInfo) {\r\n        playTime = parseInt(playTime || (videoInfo.duration - Math.random(1, 2)));\r\n        let enc = '[' + mArg.defaults.clazzId + '][' + mArg.defaults.userid + '][' +\r\n            videoMsg.property._jobid + '][' + videoMsg.objectId + '][' +\r\n            (playTime * 1000).toString() + '][d_yHJ!$pdA~5][' + (videoInfo.duration * 1000).toString() + '][0_' +\r\n            videoInfo.duration + ']';\r\n        enc = md5(enc);\r\n        common.get(mArg.defaults.reportUrl + '/' + videoInfo.dtoken + '?clipTime=0_' + videoInfo.duration +\r\n            '&otherInfo=' + videoMsg.otherInfo +\r\n            '&userid=' + mArg.defaults.userid + '&rt=0.9&jobid=' + videoMsg.property._jobid +\r\n            '&duration=' + videoInfo.duration + '&dtype=Video&objectId=' + videoMsg.objectId +\r\n            '&clazzId=' + mArg.defaults.clazzId +\r\n            '&view=pc&playingTime=' + playTime + '&isdrag=4&enc=' + enc, function (data) {\r\n                let isPassed = JSON.parse(data);\r\n                success(isPassed.isPassed);\r\n            });\r\n    });\r\n}\r\n\r\n/**\r\n * 创建div\r\n * @param {string} title \r\n */\r\nfunction createDiv(title) {\r\n    let divEl = document.createElement('div');\r\n    divEl.style.color = \"#ff0101\";\r\n    divEl.style.textAlign = 'left';\r\n    divEl.innerHTML = title;\r\n    return divEl;\r\n}\r\n\r\n/**\r\n * 获取正确答案\r\n * @param {int} list \r\n */\r\nfunction getTrueAnswer(list) {\r\n    let right = '';\r\n    for (let i = 0; i < list.length; i++) {\r\n        if (list[i].isRight) {\r\n            right += '<span style=\"margin-left:6px;\">' + list[i].name + \":\" + list[i].description + '</span>';\r\n        }\r\n    }\r\n    if (right != '') {\r\n        return right;\r\n    }\r\n    return '没有找到答案(没有,出bug了???)';\r\n}\r\n\n\n//# sourceURL=webpack:///./src/cxmooc-tools/chaoxing/video.js?");

/***/ }),

/***/ "./src/cxmooc-tools/common.js":
/*!************************************!*\
  !*** ./src/cxmooc-tools/common.js ***!
  \************************************/
/*! exports provided: injected, removeinjected, get, post, removeHTML, substrEx, randNumber, log, getImageBase64, boom_btn, clientMessage, serverMessage, gm_post, gm_get */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"injected\", function() { return injected; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeinjected\", function() { return removeinjected; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"get\", function() { return get; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"post\", function() { return post; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeHTML\", function() { return removeHTML; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"substrEx\", function() { return substrEx; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"randNumber\", function() { return randNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"log\", function() { return log; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getImageBase64\", function() { return getImageBase64; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"boom_btn\", function() { return boom_btn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clientMessage\", function() { return clientMessage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"serverMessage\", function() { return serverMessage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gm_post\", function() { return gm_post; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gm_get\", function() { return gm_get; });\n/**\r\n * 注入js资源\r\n * @param doc \r\n * @param file \r\n */\r\nfunction injected(doc, url) {\r\n    let temp = doc.createElement('script');\r\n    temp.setAttribute('type', 'text/javascript');\r\n    temp.src = url;\r\n    temp.className = \"injected-js\";\r\n    doc.documentElement.appendChild(temp);\r\n    return temp;\r\n}\r\n\r\n/**\r\n * 移除注入js\r\n */\r\nfunction removeinjected(doc) {\r\n    let resource = doc.getElementsByClassName(\"injected-js\");\r\n    for (let i = 0; i < resource.length; i++) {\r\n        resource[i].remove();\r\n    }\r\n}\r\n\r\n/**\r\n * get请求\r\n * @param {*} url \r\n */\r\nfunction get(url, success) {\r\n    let xmlhttp = createRequest();\r\n    xmlhttp.open(\"GET\", url, true);\r\n    xmlhttp.send();\r\n\r\n    xmlhttp.onreadystatechange = function () {\r\n        if (this.readyState == 4) {\r\n            if (this.status == 200) {\r\n                success && success(this.responseText, this.resource);\r\n            } else {\r\n                xmlhttp.errorCallback && xmlhttp.errorCallback(this);\r\n            }\r\n        }\r\n    }\r\n    return xmlhttp;\r\n}\r\n\r\n/**\r\n * post请求\r\n * @param {*} url \r\n * @param {*} data \r\n * @param {*} json \r\n */\r\nfunction post(url, data, json = true, success) {\r\n    let xmlhttp = createRequest();\r\n    xmlhttp.open(\"POST\", url, true);\r\n    xmlhttp.setRequestHeader('Authorization', config.vtoken || '');\r\n    if (json) {\r\n        xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n    } else {\r\n        xmlhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n    }\r\n    xmlhttp.send(data);\r\n\r\n    xmlhttp.onreadystatechange = function () {\r\n        if (this.readyState == 4) {\r\n            if (this.status == 200) {\r\n                success && success(this.responseText);\r\n            } else {\r\n                xmlhttp.errorCallback && xmlhttp.errorCallback(this);\r\n            }\r\n        }\r\n    }\r\n    return xmlhttp;\r\n}\r\n\r\n/**\r\n * 去除html标签和处理中文\r\n * @param {string} html \r\n */\r\nfunction removeHTML(html) {\r\n    //先处理img标签\r\n    var imgReplace = /<img .*?src=\"(.*?)\".*?>/g;\r\n    html = html.replace(imgReplace, '$1');\r\n    var revHtml = /<.*?>/g;\r\n    html = html.replace(revHtml, '');\r\n    html = html.replace(/(^\\s+)|(\\s+$)/g, '');\r\n    html = dealSymbol(html);\r\n    return html.replace(/&nbsp;/g, ' ');\r\n}\r\n\r\n/**\r\n * 处理符号\r\n * @param {*} topic \r\n */\r\nfunction dealSymbol(topic) {\r\n    topic = topic.replace('，', ',');\r\n    topic = topic.replace('（', '(');\r\n    topic = topic.replace('）', ')');\r\n    topic = topic.replace('？', '?');\r\n    topic = topic.replace('：', ':');\r\n    topic = topic.replace(/[“”]/g, '\"');\r\n    return topic;\r\n}\r\n\r\n/**\r\n * 取中间文本\r\n * @param {*} str \r\n * @param {*} left \r\n * @param {*} right \r\n */\r\nfunction substrEx(str, left, right) {\r\n    var leftPos = str.indexOf(left) + left.length;\r\n    var rightPos = str.indexOf(right, leftPos);\r\n    return str.substring(leftPos, rightPos);\r\n}\r\n\r\n/**\r\n * 创建http请求\r\n */\r\nfunction createRequest() {\r\n    var xmlhttp;\r\n    if (window.XMLHttpRequest) {\r\n        xmlhttp = new XMLHttpRequest();\r\n    } else {\r\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    }\r\n    xmlhttp.error = function (callback) {\r\n        xmlhttp.errorCallback = callback;\r\n        return xmlhttp;\r\n    }\r\n    return xmlhttp;\r\n}\r\n\r\nfunction randNumber(minNum, maxNum) {\r\n    switch (arguments.length) {\r\n        case 1:\r\n            return parseInt(Math.random() * minNum + 1, 10);\r\n        case 2:\r\n            return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);\r\n        default:\r\n            return 0;\r\n    }\r\n}\r\n\r\nDate.prototype.format = function (fmt) {\r\n    var o = {\r\n        \"M+\": this.getMonth() + 1, //月份 \r\n        \"d+\": this.getDate(), //日 \r\n        \"h+\": this.getHours(), //小时 \r\n        \"m+\": this.getMinutes(), //分 \r\n        \"s+\": this.getSeconds(), //秒 \r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度 \r\n        \"S\": this.getMilliseconds() //毫秒 \r\n    };\r\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n    for (var k in o)\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n}\r\n\r\nfunction log(msg) {\r\n    console.log(\"cxmooc-tools [\" + (new Date()).format(\"yyyy-MM-dd hh:mm:ss\") + \"] \" + msg)\r\n}\r\n\r\nfunction getImageBase64(img, ext) {\r\n    var canvas = document.createElement(\"canvas\");\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(img, 0, 0, img.width, img.height);\r\n    var dataURL = canvas.toDataURL(\"image/\" + ext, 0.75);//节省可怜的流量>_<,虽然好像没有啥\r\n    canvas = null;\r\n    return dataURL;\r\n}\r\n\r\nfunction boom_btn() {\r\n    if (localStorage['boom_no_prompt'] == undefined || localStorage['boom_no_prompt'] != 1) {\r\n        let msg = prompt('秒过视频会产生不良记录,是否继续?如果以后不想再弹出本对话框请在下方填写yes')\r\n        if (msg === null) return false;\r\n        if (msg === 'yes') localStorage['boom_no_prompt'] = 1;\r\n    }\r\n    return true;\r\n}\r\n\r\n//消息发送\r\nfunction clientMessage(type, eventCallback) {\r\n    let self = {};\r\n    self.tag = Math.random();\r\n    window.addEventListener('message', function (event) {\r\n        if (event.data.recv_tag && event.data.recv_tag == self.tag) {\r\n            eventCallback && eventCallback(event.data.param, event);\r\n        }\r\n    });\r\n    self.send = function (param) {\r\n        window.postMessage({ type: type, send_tag: self.tag, param: param }, '*');\r\n        return self;\r\n    };\r\n    return self;\r\n}\r\n\r\nfunction serverMessage(type, eventCallback) {\r\n    let self = {};\r\n    window.addEventListener('message', function (event) {\r\n        if (event.data.type && event.data.type == type && event.data.send_tag) {\r\n            eventCallback && eventCallback(event.data.param, function (param) {\r\n                self.send(param, event.data.send_tag);\r\n            });\r\n        }\r\n    });\r\n    self.send = function (param, tag) {\r\n        window.postMessage({ type: type, recv_tag: tag, param: param }, '*');\r\n        return self;\r\n    }\r\n    return self;\r\n}\r\n\r\n/**\r\n * 跨域的post请求\r\n * @param {*} url \r\n * @param {*} data \r\n * @param {*} json \r\n * @param {*} success \r\n */\r\nfunction gm_post(url, data, json = true, success) {\r\n    let self = {};\r\n    GM_xmlhttpRequest({\r\n        url: url,\r\n        method: 'POST',\r\n        headers: {\r\n            'Authorization': config.vtoken || '',\r\n            'Content-Type': json ? 'application/json' : 'application/x-www-form-urlencoded',\r\n        },\r\n        data: data,\r\n        onreadystatechange: function (response) {\r\n            if (response.readyState == 4) {\r\n                if (response.status == 200) {\r\n                    success && success(response.responseText);\r\n                } else {\r\n                    self.errorCallback && self.errorCallback(response);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    self.error = function (errorCallback) {\r\n        self.errorCallback = errorCallback;\r\n    }\r\n    return self;\r\n}\r\n\r\n/**\r\n * 跨域的get请求\r\n * @param {*} url \r\n * @param {*} data \r\n * @param {*} json \r\n * @param {*} success \r\n */\r\nfunction gm_get(url, success) {\r\n    let self = {};\r\n    GM_xmlhttpRequest({\r\n        url: url,\r\n        method: 'GET',\r\n        onreadystatechange: function (response) {\r\n            if (response.readyState == 4) {\r\n                if (response.status == 200) {\r\n                    success && success(response.responseText);\r\n                } else {\r\n                    self.errorCallback && self.errorCallback(response);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    self.error = function (errorCallback) {\r\n        self.errorCallback = errorCallback;\r\n    }\r\n    return self;\r\n}\r\n\r\n//实现GM_xmlhttpRequest\r\nif (window.GM_xmlhttpRequest == undefined) {\r\n    window.GM_xmlhttpRequest = function (param) {\r\n        let send = {};\r\n        send.url = param.url;\r\n        send.method = param.method;\r\n        send.data = param.data;\r\n        send.headers = param.headers;\r\n        clientMessage('GM_xmlhttpRequest', function (response, event) {\r\n            if (response.event || response.event == 'onreadystatechange') {\r\n                param.onreadystatechange && param.onreadystatechange(response);\r\n            }\r\n        }).send(send);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/cxmooc-tools/common.js?");

/***/ }),

/***/ "./src/tampermonkey/common.js":
/*!************************************!*\
  !*** ./src/tampermonkey/common.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {global.config = JSON.parse(localStorage['config']);\r\nconfig.duration = (config.interval || 0.1) * 60000;\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./src/tampermonkey/common.js?");

/***/ }),

/***/ "./src/tampermonkey/cxmooc-pack.js":
/*!*****************************************!*\
  !*** ./src/tampermonkey/cxmooc-pack.js ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common */ \"./src/tampermonkey/common.js\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_common__WEBPACK_IMPORTED_MODULE_0__);\n\r\nconst chaoxing = __webpack_require__(/*! ../cxmooc-tools/chaoxing/chaoxing */ \"./src/cxmooc-tools/chaoxing/chaoxing.js\");\r\n\r\nwindow.onload = function () {\r\n    let cx = new chaoxing();\r\n    if (window.location.href.indexOf('mycourse/studentstudy?') > 0) {\r\n        //超星学习页面\r\n        document.addEventListener('load', function (ev) {\r\n            var ev = ev || event;\r\n            var _this = ev.srcElement || ev.target;\r\n            if (_this.id == 'iframe') {\r\n                cx.studentstudy();\r\n            }\r\n        }, true);\r\n        var frame = document.getElementById('iframe');\r\n        if (frame != null) {\r\n            cx.studentstudy();\r\n        }\r\n    } else if (window.location.href.indexOf('ztnodedetailcontroller/visitnodedetail') > 0) {\r\n        //超星阅读页面\r\n        cx.read();\r\n    } else if (window.location.href.indexOf('exam/test/reVersionTestStartNew') > 0) {\r\n        cx.exam();\r\n    } else if (window.location.href.indexOf('exam/test/reVersionPaperMarkContentNew') > 0) {\r\n        cx.collectExam();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/tampermonkey/cxmooc-pack.js?");

/***/ })

/******/ });