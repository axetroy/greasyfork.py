// ==UserScript==
// @name          Wanikani DotDotDot Expander
// @namespace     https://www.wanikani.com
// @description   expand *... english text to full length
// @version       2.0.1
// @include       https://www.wanikani.com/*
// @exclude       https://www.wanikani.com/lesson*
// @exclude       https://www.wanikani.com/review*
// @run-at        document-end
// @grant         none
// ==/UserScript==

// Original by Takuya Kobayashi
// Original location: https://greasyfork.org/en/scripts/5584-wanikani-dotdotdot-expander

// Repaired by Robin Findley

/*global $, console, Search */

(function () {
    'use strict';
    var dotItem = {
        '千円' : 'One Thousand Yen',
        '無意識' : 'Unconsciousness',
        '沢' : 'Mountain Stream',
        '別人' : 'Different Person',
        '下さい' : 'Please Give Me',
        '〜年来' : 'For Some Years',
        '〜丁目' : 'District Of A Town',
        '苦い' : 'Bitter Tasting',
        '名物' : 'Local Specialty',
        '歯を磨く' : 'To Brush One\'s Teeth',
        '歳暮' : 'End Of The Year',
        '歳入' : 'Annual Revenue',
        '死刑囚' : 'Condemned Criminal',
        '歓楽街' : 'Pleasure Quarter',
        '止める' : 'To Stop Something',
        '正解' : 'Correct Answer',
        '模範' : 'Exemplification',
        '曜日' : 'Day Of The Week',
        '替わる' : 'To Be Replaced',
        '朝刊' : 'Morning Edition',
        '未熟' : 'Not Yet Good At',
        '本物' : 'The Real Thing',
        '最新鋭' : 'State Of The Art',
        '最優遇' : 'Most Favorable Treatment',
        '月末' : 'End Of The Month',
        '月額' : 'Monthly Amount',
        '月刊' : 'Monthly Edition',
        '期' : 'Period Of Time',
        '東京都' : 'Tokyo Metropolis',
        '果たして' : 'As Was Expected',
        '枚' : 'Flat Objects Counter',
        '枚数' : 'Number Of Sheets',
        '殊勲' : 'Meritorious Deeds',
        '殉職' : 'Die At One\'s Post',
        '残額' : 'Remaining Amount',
        '残る' : 'To Remain Behind',
        '残す' : 'To Leave Behind',
        '残品' : 'Unsold Merchandise',
        '毒言' : 'Abusive Language',
        '溶かす' : 'To Melt Something',
        '泊める' : 'To Let Someone Stay Over',
        '泊まる' : 'To Stay The Night',
        '泌尿器' : 'Urinary Organs',
        '減る' : 'To Be Decreased',
        '減俸' : 'Salary Reduction',
        '混じる' : 'To Get Mixed Up In',
        '混乱する' : 'To Be Confused',
        '深夜' : 'Middle Of The Night',
        '滑り台' : 'Playground Slide',
        '滅びる' : 'To Be Destroyed',
        '渇く' : 'To Become Thirsty',
        '済' : 'Come To An End',
        '済む' : 'To Come To An End',
        '渓流' : 'Mountain Stream',
        '濁る' : 'To Become Muddy',
        '潜る' : 'To Pass Through',
        '漫才' : 'Comic Dialogue',
        '澄む' : 'To Become Clear',
        '漏らす' : 'To Leak Something',
        '漂着' : 'Drifting Ashore',
        '演奏' : 'Musical Performance',
        '漁業' : 'Fishing Industry',
        '浮世絵' : 'Woodblock Print',
        '浸る' : 'To Be Soaked In',
        '活用形' : 'Conjugated Form',
        '涼む' : 'To Cool Oneself',
        '液晶' : 'Liquid Crystal',
        '洋服' : 'Western Clothing',
        '洋室' : 'Western Style Room',
        '洗濯機' : 'Washing Machine',
        '流行語' : 'Popular Phrase',
        '沿海' : 'Coastal Waters',
        '沿う' : 'To Run Alongside',
        '沿線' : 'Along The Train Line',
        '治療' : 'Medical Therapy',
        '沼田' : 'Marshy Rice Field',
        '油断' : 'Inattentiveness',
        '水彩画' : 'Watercolor Painting',
        '求婚' : 'Marriage Proposal',
        '没頭' : 'Immersing Oneself',
        '気持ち悪い' : 'To Feel Terrible',
        '気に入る' : 'To Be Pleased With',
        '沖縄県' : 'Okinawa Prefecture',
        '気象庁' : 'Weather Agency',
        '欧米' : 'Europe And America',
        '惨敗' : 'Crushing Failure',
        '推奨' : 'Recommendation',
        '惨状' : 'Disastrous Scene',
        '推薦' : 'Recommendation',
        '掛け算' : 'Multiplication',
        '愛媛県' : 'Ehime Prefecture',
        '愛知県' : 'Aichi Prefecture',
        '掛軸' : 'Hanging Scroll',
        '惜敗' : 'Loss Of A Close Game',
        '惜しまない' : 'Without Sparing',
        '核兵器' : 'Nuclear Weapons',
        '核分裂' : 'Nuclear Fission',
        '慶事' : 'Auspicious Event',
        '慶弔' : 'Congratulations And Condolences',
        '慶祝' : 'Congratulation',
        '憲政' : 'Constitutional Government',
        '掲げる' : 'To Put Up A Sign',
        '掲示板' : 'Bulletin Board',
        '栃' : 'Horse Chestnut',
        '栃木県' : 'Tochigi Prefecture',
        '惑う' : 'To Be Misguided',
        '掃除機' : 'Vacuum Cleaner',
        '慎む' : 'To Be Discreet',
        '撮る' : 'To Take A Picture',
        '摂理' : 'Divine Providence',
        '撤兵' : 'Withdrawal Of Troops',
        '感涙' : 'Tears Of Gratitude',
        '感慨' : 'Strong Feelings',
        '感銘' : 'Deep Impression',
        '感動する' : 'To Be Emotionally Moved',
        '感嘆符' : 'Exclamation Mark',
        '掌' : 'Palm Of One\'s Hand',
        '探偵' : 'Private Detective',
        '慣れる' : 'To Become Accustomed To',
        '愚痴' : 'Idle Complaint',
        '思わず' : 'Unintentionally',
        '懲りる' : 'To Learn By Experience',
        '怪事件' : 'Strange Mystery',
        '怒らせる' : 'To Anger Someone',
        '怠る' : 'To Be Negligent',
        '急患' : 'Emergency Patient',
        '急増' : 'Sudden Increase',
        '性病' : 'Sexually Transmitted Disease',
        '抜ける' : 'To Be Extracted',
        '携帯電話' : 'Portable Phone',
        '携帯ストラップ' : 'Cell Phone Strap',
        '戸' : 'Japanese Style Door',
        '戸籍' : 'Family Register',
        '悪因悪果' : 'Evil Breeds Evil',
        '悪循環' : 'Vicious Circle',
        '搬送' : 'Transportation',
        '披露宴' : 'Wedding Reception',
        '戦没' : 'Killed In Action',
        '手の甲' : 'Back Of One\'s Hand',
        '才人' : 'Talented Person',
        '投げ付ける' : 'To Throw Against',
        '患う' : 'To Be Afflicted',
        '招き猫' : 'Shop Window Cat',
        '捜査' : 'Criminal Investigation',
        '拝見する' : 'To Have A Look At',
        '挿絵' : 'Book Illustration',
        '挑む' : 'To Challenge Someone',
        '桑原' : 'Mulberry Field',
        '桑畑' : 'Mulberry Field',
        '挟まる' : 'To Get Between',
        '捕える' : 'To Grasp An Idea',
        '捕虜' : 'Prisoner Of War',
        '楽しみ' : 'Looking Forward To',
        '楽器' : 'Musical Instrument',
        '極める' : 'To Carry To Extremes',
        '敝' : 'Demolition Man',
        '景況' : 'Business Climate',
        '敷金' : 'Security Deposit',
        '政党' : 'Political Party',
        '放れる' : 'To Be Released',
        '改訂版' : 'Revised Edition',
        '時差' : 'Time Difference',
        '構える' : 'To Assume A Stance',
        '敢行' : 'Decisive Action',
        '散歩する' : 'To Go For A Walk',
        '散る' : 'To Be Scattered',
        '敗れる' : 'To Be Defeated',
        '様' : 'Formal Name Title',
        '恨む' : 'To Hold A Grudge',
        '早乙女' : 'Rice Planting Girl',
        '早瀬' : 'Swift Currents',
        '暴れる' : 'To Act Violently',
        '暴力団' : 'Crime Syndicate',
        '方向音痴' : 'No Sense Of Direction',
        '新鋭' : 'Freshly Picked',
        '斬殺' : 'Killing With A Sword',
        '暫く' : 'In A Little While',
        '恒例' : 'Established Practice',
        '文字' : 'Letter (Of The Alphabet)',
        '文化祭' : 'School Festival',
        '日本酒' : 'Japanese Style Alcohol',
        '日本語' : 'Japanese Language',
        '日欧' : 'Europe And Japan',
        '日韓' : 'Japan And South Korea',
        '日系' : 'Japanese Descent',
        '恥知らず' : 'Shameless Person',
        '旧暦' : 'Lunisolar Calendar',
        '既に' : 'As Mentioned Before',
        '明治維新' : 'Meiji Restoration',
        '映る' : 'To Be Reflected',
        '電柱' : 'Telephone Pole',
        '電鉄' : 'Electric Railway',
        '電飾' : 'Decorative Lighting',
        '電子機器' : 'Electronic Equipment',
        '電力' : 'Electric Power',
        '電灯' : 'Electric Light',
        '電磁場' : 'Electromagnetic Field',
        '電話帳' : 'Telephone Book',
        '雅楽' : 'Japanese Court Music',
        '雑煮' : 'New Year\'s Dish',
        '雑費' : 'Miscellaneous Expenses',
        '集金' : 'Collecting Money',
        '集まる' : 'To Come Together',
        '集中する' : 'To Concentrate',
        '震度' : 'Earthquake Intensity',
        '震災' : 'Earthquake Disaster',
        '非常口' : 'Emergency Exit',
        '革ジャン' : 'Leather Jacket',
        '面接する' : 'To Interview With',
        '靖国神社' : 'Yasukuni Shrine',
        '驚く' : 'To Be Surprised',
        '鼻先' : 'Tip Of The Nose',
        '鹿児島県' : 'Kagoshima Prefecture',
        '高校生' : 'High School Student',
        '高騰' : 'Sudden Price Jump',
        '高齢者' : 'Elderly Person',
        '高等学校' : 'Senior High School',
        '高血圧' : 'High Blood Pressure',
        '醜態' : 'Shameful Sight',
        '鎮魂' : 'Repose Of Souls',
        '酷評' : 'Severe Criticism',
        '都庁' : 'Metropolitan Government',
        '都合' : 'At Your Convenience',
        '頃' : 'Approximate Time',
        '頂戴' : 'Humbly Receiving',
        '鑑定' : 'Expert Opinion',
        '頂く' : 'To Humbly Receive',
        '酢の物' : 'Vinegared Food',
        '香川県' : 'Kagawa Prefecture',
        '鎖国' : 'National Isolation',
        '金縛り' : 'Tied Down By Money',
        '造る' : 'To Mass Produce',
        '透ける' : 'To Be Transparent',
        '透き通る' : 'To Be Transparent',
        '造園' : 'Landscape Gardening',
        '逆効果' : 'Opposite Effect',
        '退院する' : 'To Be Discharged',
        '退く' : 'To Withdraw From',
        '連峰' : 'Mountain Range',
        '通信網' : 'Communications Network',
        '連覇' : 'Successive Championships',
        '鉛毒' : 'Lead Poisoning',
        '鉱業' : 'Mining Industry',
        '銃殺' : 'Death By Shooting',
        '邦人' : 'Fellow Countryman',
        '還元' : 'Return To Origins',
        '邦訳' : 'Translation Into Japanese',
        '鈍感' : 'Thickheadedness',
        '音訓' : 'On\'yomi And Kun\'yomi',
        '音読み' : 'Chinese Reading',
        '錯覚' : 'Optical Illusion',
        '鋼材' : 'Steel Material',
        '録音' : 'Sound Recording',
        '額' : 'Framed Picture',
        '顔面' : 'Face Of A Person',
        '顧みる' : 'To Look Back On',
        '館' : 'Public Building',
        '養鶏' : 'Chicken Farming',
        '餓死' : 'Death From Starvation',
        '風呂屋' : 'Public Bathhouse',
        '長崎県' : 'Nagasaki Prefecture',
        '長唄' : 'Long Shamisen Song',
        '駅長' : 'Station Master',
        '駅弁' : 'Train Station Bento',
        '駅前' : 'Front Of Station',
        '駅員' : 'Train Station Employee',
        '駐日' : 'Resident Of Japan',
        '限定販売' : 'Limited Edition',
        '駐留軍' : 'Stationed Troops',
        '降車' : 'Getting Off A Train',
        '飛び込み自殺' : 'Suicide By Train',
        '障子' : 'Japanese Sliding Door',
        '遷都' : 'Move The Capital',
        '飽きる' : 'To Get Tired Of',
        '飲み放題' : 'All You Can Drink',
        '飲み会' : 'Drinking Party',
        '過敏' : 'Oversensitivity',
        '過ごす' : 'To Spend Time On',
        '遠視' : 'Farsightedness',
        '門扉' : 'Doors Of A Gate',
        '遊園地' : 'Amusement Park',
        '遂行' : 'Accomplishment',
        '食べ放題' : 'All You Can Eat',
        '食中毒' : 'Food Poisoning',
        '開業' : 'Opening A Business',
        '開閉' : 'Opening And Closing',
        '開封' : 'Unsealed Letter',
        '隔月' : 'Every Other Month',
        '隔週' : 'Every Other Week',
        '間違える' : 'To Make A Mistake',
        '間に合う' : 'To Be In Time For',
        '違う' : 'To Be Different',
        '関する' : 'To Be Connected To',
        '関西弁' : 'Kansai Dialect',
        '隣国' : 'Neighboring Country',
        '隣家' : 'Neighboring House',
        '閣僚' : 'Cabinet Ministers',
        '閣議' : 'Cabinet Meeting',
        '闘志' : 'Fighting Spirit',
        '防犯' : 'Crime Prevention',
        '防火' : 'Fire Prevention',
        'バベルの塔' : 'Tower Of Babel',
        'フランス語' : 'French Language',
        '〜把' : 'Counter For Bundles',
        '〜放題' : 'As Much As You Want',
        '〜様' : 'Formal Name Ender',
        '〜間' : 'Amount Of Time',
        '〜達' : 'Pluralizing Suffix',
        '〜人' : 'Number Of People',
        '〜号室' : 'Room Number Counter',
        '〜君' : 'Boy Name Ender',
        '〜匹' : 'Small Animal Counter',
        '〜畳' : 'Counter For Tatami Mats',
        '〜貫' : 'Sushi Pieces Counter',
        'スペイン語' : 'Spanish Language',
        'イギリス人' : 'British Person',
        'アメリカ製' : 'Made In America',
        'お構いなく' : 'Don\'t Worry About It',
        'お願いします' : 'Please Help Me',
        'お祝い' : 'Congratulation',
        'お誕生日おめでとう' : 'Happy Birthday',
        'お見舞い' : 'Sympathy Visit',
        'ご無沙汰' : 'Neglecting To Contact',
        '学歴' : 'Academic History',
        '孤島' : 'Solitary Island',
        '字典' : 'Character Dictionary',
        '娘婿' : 'Adopted Son In Law',
        '四季' : 'The Four Seasons',
        '四匹' : 'Four Small Animals',
        '四十二階' : 'Forty Second Floor',
        '回数券' : 'Book Of Tickets',
        '回忌' : 'Death Anniversary',
        '回転ずし' : 'Rotating Sushi',
        '国柄' : 'National Character',
        '国宝' : 'National Treasure',
        '国境' : 'National Border',
        '国益' : 'National Interests',
        '困る' : 'To Be Distressed',
        '地中海' : 'Mediterranean Sea',
        '地下街' : 'Underground Shopping Mall',
        '土俵際' : 'Edge Of A Sumo Ring',
        '坊主' : 'Buddhist Priest',
        '垂らす' : 'To Dangle Something',
        '宮廷' : 'Imperial Court',
        '家畜' : 'Domestic Animals',
        '宰相' : 'Prime Minister',
        '定款' : 'Articles Of Incorporation',
        '定量' : 'Fixed Quantity',
        '官金' : 'Government Funds',
        '官邸' : 'Official Residence',
        '官庁' : 'Government Office',
        '官営' : 'Government Management',
        '寮生' : 'Boarding Student',
        '寸暇' : 'Moment\'s Leisure',
        '密会' : 'Secret Meeting',
        '密告' : 'Secret Information',
        '人柄' : 'Personal Character',
        '人数' : 'The Number Of People',
        '人違い' : 'Mistaken Identity',
        '人種' : 'Race Of People',
        '人込み' : 'Crowd Of People',
        '人脈' : 'Personal Connections',
        '庶務' : 'General Affairs',
        '予告' : 'Advance Notice',
        '二泊' : 'Two Night\'s Stay',
        '二万' : 'Twenty Thousand',
        '二世' : 'Second Generation',
        '二十歳' : 'Twenty Years Old',
        '交通網' : 'Traffic Network',
        '五枚' : 'Five Flat Objects',
        '五感' : 'The Five Senses',
        '座禅' : 'Zen Meditation',
        '庁舎' : 'Government Office Building',
        '中欧' : 'Central Europe',
        '中旬' : 'Middle Ten Days Of The Month',
        '中学生' : 'Middle School Student',
        '中佐' : 'Lieutenant Colonel',
        '中尉' : 'First Lieutenant',
        '中級' : 'Intermediate Level',
        '応援団' : 'Rooting Section',
        '帝' : 'Japanese Emperor',
        '帝政' : 'Imperial Government',
        '差別' : 'Discrimination',
        '差別する' : 'To Discriminate',
        '修士' : 'Master\'s Degree',
        '建前' : 'Public Behavior',
        '丸ごと' : 'In Its Entirety',
        '主人' : 'Head Of Household',
        '主位' : 'Leading Person',
        '常勤' : 'Full Time Employment',
        '念願' : 'Heart\'s Desire',
        '丹誠' : 'Working Earnestly',
        '帰郷する' : 'To Return To One\'s Hometown',
        '帰る' : 'To Return Home',
        '仲直り' : 'Reconciliation',
        '左' : 'Left Direction',
        '必須条件' : 'Essential Condition',
        '心願' : 'Heartfelt Desire',
        '廃れる' : 'To Become Obsolete',
        '並ぶ' : 'To Be Lined Up',
        '心底' : 'Bottom Of One\'s Heart',
        '左右' : 'Left And Right',
        '仏典' : 'Buddhist Scriptures',
        '仏像' : 'Image Of Buddha',
        '仏僧' : 'Buddhist Priest',
        '仏壇' : 'Buddhist Altar',
        '一本気' : 'One Track Mind',
        '一泊' : 'One Night\'s Stay',
        '一概に' : 'Unconditionally',
        '一斉に' : 'Simultaneously',
        '一昨日' : 'Day Before Last',
        '一年生' : 'First Year Student',
        '一億' : 'One Hundred Million',
        '一億円' : 'One Hundred Million Yen',
        '一周' : 'One Time Around',
        '一周忌' : 'First Anniversary Of Death',
        '一個' : 'One Small Thing',
        '一匹' : 'One Small Animal',
        '一筋' : 'Single Mindedly',
        '一生懸命' : 'With All One\'s Might',
        '一貫' : 'One Piece Of Sushi',
        '上旬' : 'First Ten Days Of The Month',
        '係わる' : 'To Be Involved With',
        '三世' : 'Third Generation',
        '三個' : 'Three Small Things',
        '市営' : 'Run By The City',
        '上級' : 'Advanced Level',
        '上述' : 'Above Mentioned',
        '両替' : 'Money Exchange',
        '下旬' : 'Last Ten Days Of The Month',
        '不孝' : 'Disobedience To Parents',
        '不孝者' : 'Disobedient Child',
        '信仰' : 'Religious Faith',
        '不燃ゴミ' : 'Nonburnable Garbage',
        '仕方がない' : 'Can\'t Be Helped',
        '他人' : 'Another Person',
        '他動詞' : 'Transitive Verb',
        '丁目' : 'District Of A Town',
        '仁義' : 'Humanity And Justice',
        '巣立ち' : 'Leave The Nest',
        '忘れ物' : 'Forgotten Item',
        '付く' : 'To Be Attached',
        '忘年会' : 'Year End Party',
        '供える' : 'To Make An Offering',
        '伝染病' : 'Contagious Disease',
        '伝わる' : 'To Be Transmitted',
        '彩る' : 'To Color Something',
        '徳島県' : 'Tokushima Prefecture',
        '伸びる' : 'To Be Stretched',
        '伸ばす' : 'To Stretch Something',
        '弾く' : 'To Play A Stringed Instrument',
        '徹する' : 'To Devote Oneself',
        '役人' : 'Public Official',
        '循環器' : 'Circulatory Organ',
        '弦楽器' : 'Stringed Instrument',
        '休学' : 'Absent From School',
        '待たせる' : 'To Make Someone Wait',
        '弟' : 'Younger Brother',
        '例文' : 'Example Sentence',
        '何枚' : 'How Many Flat Objects',
        '何遍' : 'How Many Times',
        '余る' : 'To Be In Surplus',
        '当て字' : 'Phonetic Kanji',
        '当たる' : 'To Be On Target',
        '何回' : 'How Many Times',
        '何人' : 'How Many People',
        '何度' : 'How Many Times',
        '体力' : 'Physical Strength',
        '弔辞' : 'Memorial Address',
        '会社員' : 'Company Employee',
        '会議室' : 'Conference Room',
        '幻滅' : 'Disillusionment',
        '乾かす' : 'To Dry Something',
        '幾度' : 'How Many Times',
        '年来' : 'For Some Years',
        '年頃' : 'Approximate Age',
        '年代順' : 'Chronological Order',
        '年譜' : 'Chronological Record',
        '年賀状' : 'New Year\'s Card',
        '年輩' : 'Elderly Person',
        '乱れる' : 'To Be In Disorder',
        '乱す' : 'To Put In Disorder',
        '久しぶり' : 'Long Time No See',
        '乗せる' : 'To Give A Ride',
        '尽きる' : 'To Be Exhausted',
        '山登り' : 'Mountain Climbing',
        '山脈' : 'Mountain Range',
        '山荘' : 'Mountain Retreat',
        '就職' : 'Finding Employment',
        '小文字' : 'Lowercase Letter',
        '少尉' : 'Second Lieutenant',
        '小さい順' : 'Increasing Order',
        '小学校' : 'Elementary School',
        '小学生' : 'Elementary School Student',
        '尉' : 'Military Officer',
        '尊敬語' : 'Honorific Japanese',
        '岐阜県' : 'Gifu Prefecture',
        '届く' : 'To Be Delivered',
        '岡山県' : 'Okayama Prefecture',
        '履歴書' : 'Personal History',
        '履く' : 'To Put On Shoes',
        '嫌悪感' : 'Unpleasant Feelings',
        '全治' : 'Complete Recovery',
        '全壊' : 'Complete Destruction',
        '全裸' : 'Completely Nude',
        '可燃ゴミ' : 'Burnable Garbage',
        '右' : 'Right Direction',
        '厳禁' : 'Strictly Forbidden',
        '冷房' : 'Air Conditioning',
        '冷遇' : 'Cold Reception',
        '冷やす' : 'To Chill Something',
        '妹' : 'Younger Sister',
        '兵員' : 'Military Personnel',
        '兵糧' : 'Army Provisions',
        '共産党' : 'Communist Party',
        '優遇' : 'Favorable Treatment',
        '公邸' : 'Official Residence',
        '公開' : 'Open To The Public',
        '召す' : 'To Humbly Call',
        '冬休み' : 'Winter Holiday',
        '公益' : 'Public Benefit',
        '公示' : 'Public Announcement',
        '公社' : 'Public Corporation',
        '公用' : 'Government Business',
        '冬至' : 'Winter Solstice',
        '億' : 'Hundred Million',
        '冠' : 'Traditional Cap',
        '元旦' : 'New Year\'s Day',
        '充電する' : 'To Charge A Battery',
        '内因' : 'Internal Cause',
        '元帥' : 'General Of The Army',
        '内緒話' : 'Confidential Talk',
        '内臓' : 'Internal Organ',
        '呆れ返る' : 'To Be Utterly Amazed',
        '呆ける' : 'To Grow Senile',
        '呉越同舟' : 'Bitter Enemies In The Same Boat',
        '和服' : 'Japanese Style Clothes',
        '和風' : 'Japanese Style',
        '和食' : 'Japanese Style Food',
        '和室' : 'Japanese Style Room',
        '和尚' : 'Buddhist High Priest',
        '和訳' : 'Japanese Translation',
        '先々月' : 'Month Before Last',
        '妊娠する' : 'To Be Pregnant',
        '妊婦' : 'Pregnant Woman',
        '参加する' : 'To Participate',
        '及第' : 'Passing An Exam',
        '原潜' : 'Nuclear Submarine',
        '償う' : 'To Compensate For',
        '原子炉' : 'Atomic Reactor',
        '再来月' : 'Month After Next',
        '再来週' : 'Week After Next',
        '再来年' : 'Year After Next',
        '免れる' : 'To Escape From',
        '反省' : 'Reconsideration',
        '入院' : 'Hospitalization',
        '入隊' : 'Enlist In The Army',
        '入学' : 'School Admission',
        '入学試験' : 'Entrance Exams',
        '入籍' : 'Entry In Family Register',
        '入社' : 'Joining A Company',
        '写る' : 'To Be Photographed',
        '叙勲' : 'Conferring Of Decorations',
        '取材' : 'Covering An Event',
        '取り敢えず' : 'For The Time Being',
        '取り逃がす' : 'To Fail To Catch',
        '口癖' : 'Favorite Phrase',
        '受託' : 'Be Entrusted With',
        '凝る' : 'To Be Absorbed In',
        '出来る' : 'To Be Able To Do',
        '出来上がる' : 'To Be Finished',
        '出没' : 'Appearing Frequently',
        '出会う' : 'To Meet By Chance',
        '出版社' : 'Publishing Company',
        '出獄' : 'Release From Prison',
        '凶' : 'Treasure Chest',
        '凹む' : 'To Become Hollow',
        '凶器' : 'Dangerous Weapon',
        '倒れる' : 'To Get Knocked Over',
        '借家' : 'Renting A House',
        '凍死' : 'Freeze To Death',
        '凡人' : 'Ordinary Person',
        '初めて' : 'For The First Time',
        '初回' : 'The First Time',
        '初級' : 'Beginner Level',
        '副大統領' : 'Vice President',
        '利く' : 'To Be Effective',
        '助詞' : 'Grammar Particle',
        '吸い殻' : 'Cigarette Butt',
        '傷つける' : 'To Hurt Someone',
        '傷者' : 'Injured Person',
        '創造力' : 'Creative Power',
        '効く' : 'To Be Effective',
        '吹き出す' : 'To Begin To Blow',
        '割り勘' : 'Splitting The Cost',
        '割り箸' : 'Splittable Chopsticks',
        '励ます' : 'To Encourage Someone',
        '向ける' : 'To Turn Towards',
        '刑事' : 'Police Detective',
        '分類' : 'Classification',
        '合格する' : 'To Pass A Test',
        '合わせる' : 'To Join Together',
        '削る' : 'To Whittle Down',
        '合繊' : 'Synthetic Fiber',
        '前売り券' : 'Advance Ticket',
        '名簿' : 'Register Of Names',
        '別に' : 'Not Particularly',
        '別冊' : 'Separate Volume',
        '備蓄' : 'Emergency Stores',
        '劣る' : 'To Be Inferior To',
        '劣等感' : 'Inferiority Complex',
        '傘立て' : 'Umbrella Stand',
        '執る' : 'To Take Control',
        '執行猶予' : 'Suspended Sentence',
        '埼玉県' : 'Saitama Prefecture',
        '埋め合わせる' : 'To Compensate For',
        '勝手' : 'As One Pleases',
        '勝敗' : 'Victory Or Defeat',
        '即効' : 'Immediate Effect',
        '卸す' : 'To Sell Wholesale',
        '医学' : 'Medical Science',
        '卸値' : 'Wholesale Price',
        '医大' : 'Medical University',
        '医療' : 'Medical Treatment',
        '塾生' : 'Cram School Student',
        '却って' : 'On The Contrary',
        '危篤' : 'Critical Condition',
        '卒業式' : 'Graduation Ceremony',
        '包み紙' : 'Wrapping Paper',
        '占い' : 'Fortune Telling',
        '千円札' : 'Thousand Yen Bill',
        '勇む' : 'To Be Encouraged',
        '塊魂' : 'Katamari Damacy',
        '勤める' : 'To Be Employed At',
        '動かす' : 'To Move Something',
        '勧告' : 'Recommendation',
        '南極圏' : 'Antarctic Circle',
        '塁審' : 'Baseball Umpire',
        '十万' : 'One Hundred Thousand',
        '北緯' : 'Northern Latitude',
        '南緯' : 'Southern Latitude',
        '化繊' : 'Synthetic Fibers',
        '南蛮' : 'Southern Barbarians',
        '勘案' : 'Taking Into Consideration',
        '勘違い' : 'Misunderstanding',
        '天気予報' : 'Weather Forecast',
        '天国' : 'Kingdom Of Heaven',
        '天皇' : 'Emperor Of Japan',
        '女権' : 'Women\'s Rights',
        '失望' : 'Disappointment',
        '夫婦' : 'Husband And Wife',
        '夫妻' : 'Husband And Wife',
        '奏楽' : 'Musical Performance',
        '夏休み' : 'Summer Vacation',
        '夏至' : 'Summer Solstice',
        '奇襲' : 'Surprise Attack',
        '変死' : 'Unnatural Death',
        '変事' : 'Strange Incident',
        '奈良県' : 'Nara Prefecture',
        '大文字' : 'Uppercase Letters',
        '大量' : 'Large Quantity',
        '大違い' : 'Big Difference',
        '大きい順' : 'Decreasing Order',
        '大学院' : 'Graduate School',
        '大学院生' : 'Graduate Student',
        '大学生' : 'University Student',
        '大仏' : 'Giant Buddha Statue',
        '大役' : 'Important Task',
        '夕刊' : 'Evening Edition',
        '大腸' : 'Large Intestine',
        '大衆' : 'General Public',
        '外れる' : 'To Be Disconnected',
        '外国' : 'Foreign Country',
        '外国人' : 'Foreign Person',
        '外務大臣' : 'Minister Of Foreign Affairs',
        '外観' : 'External Appearance',
        '噴水' : 'Water Fountain',
        '噴煙' : 'Eruption Of Smoke',
        '商店街' : 'Shopping District',
        '始めに' : 'In The Beginning',
        '委員' : 'Member Of A Committee',
        '増やす' : 'To Increase Something',
        '品詞' : 'Part Of Speech',
        '品質' : 'Material Quality',
        '喜寿' : 'Seventy Seventh Birthday',
        '営業' : 'Running A Business',
        '営業する' : 'To Run A Business',
        '営業中' : 'Open For Business',
        '営む' : 'To Run A Business',
        '喪服' : 'Mourning Dress',
        '偏食' : 'Unbalanced Diet',
        '壊す' : 'To Break Something',
        '嘱託' : 'Part Time Employee',
        '嘉日' : 'Auspicious Day',
        '稿料' : 'Advance For Manuscript',
        '稼ぐ' : 'To Earn Income',
        '稲作' : 'Rice Cultivation',
        '目次' : 'Table Of Contents',
        '相撲' : 'Sumo Wrestling',
        '直轄' : 'Direct Control',
        '直航' : 'Nonstop Flight',
        '盆' : 'Lantern Festival',
        '盆踊り' : 'Bon Festival Dance',
        '眠り薬' : 'Sleeping Pills',
        '県営' : 'Run By The Prefecture',
        '着替え' : 'Change Of Clothes',
        '睡眠薬' : 'Sleeping Pills',
        '管弦楽' : 'Orchestral Music',
        '節句' : 'Seasonal Festival',
        '穴場' : 'Hole In The Wall',
        '積む' : 'To Pile Things Up',
        '翻意' : 'Change One\'s Mind',
        '縦横' : 'Length And Width',
        '縦書' : 'Vertical Writing',
        '総理' : 'Prime Minister',
        '総理府' : 'Prime Minister\'s Office',
        '総理大臣' : 'Prime Minister',
        '翌朝' : 'The Next Morning',
        '翌月' : 'The Next Month',
        '線路' : 'Railroad Track',
        '縁談' : 'Marriage Proposal',
        '置き場' : 'Place To Put Something',
        '義塾' : 'Private School',
        '署' : 'Government Office',
        '美人' : 'Beautiful Woman',
        '群馬県' : 'Gunma Prefecture',
        '紛れる' : 'To Be Diverted',
        '絞殺' : 'Death By Strangling',
        '累進' : 'Successive Promotion',
        '累計' : 'Cumulative Total',
        '紳士協定' : 'Gentlemen\'s Agreement',
        '紹介状' : 'Letter Of Introduction',
        '統帥' : 'Supreme Command',
        '紫外線' : 'Ultra Violet Rays',
        '素粒子' : 'Elementary Particle',
        '結婚式' : 'Marriage Ceremony',
        '経' : 'Passage Of Time',
        '経験者' : 'Experienced Person',
        '絡む' : 'To Get Entangled',
        '納まる' : 'To Be Supplied',
        '紡織' : 'Spinning And Weaving',
        '続々' : 'One After Another',
        '繁茂' : 'Luxuriant Growth',
        '精一杯' : 'With All One\'s Might',
        '精神病' : 'Mental Illness',
        '第' : 'Ordinal Number Prefix',
        '第一段' : 'The First Step',
        '第一印象' : 'First Impression',
        '立ち飲み' : 'Stand And Drink',
        '童話' : 'Children\'s Story',
        '現場' : 'Current Location',
        '焦る' : 'To Be In A Hurry',
        '福寿' : 'Happiness And Longevity',
        '珠算' : 'Calculation With Abacus',
        '玄米' : 'Unpolished Rice',
        '瑞' : 'Congratulations',
        '熊本県' : 'Kumamoto Prefecture',
        '無我夢中' : 'Total Absorption',
        '無事' : 'Safe And Sound',
        '無報酬' : 'Free Of Charge',
        '照れる' : 'To Feel Embarrassed',
        '研究所' : 'Research Institute',
        '燃やす' : 'To Burn Something',
        '犯す' : 'To Commit A Crime',
        '為に' : 'For The Sake Of',
        '特急' : 'Limited Express Train',
        '特徴' : 'Characteristic',
        '特質' : 'Characteristic',
        '球威' : 'A Pitcher\'s Stuff',
        '爆笑' : 'Explosive Laughter',
        '片道' : 'One Way Street',
        '片言' : 'Broken Japanese',
        '炉心' : 'Nuclear Reactor Core',
        '牧場' : 'Livestock Farm',
        '短距離' : 'Short Distance',
        '矛先' : 'Point Of Spear',
        '石碑' : 'Stone Monument',
        '献血' : 'Blood Donation',
        '猿真似' : 'Monkey See Monkey Do',
        '独り言' : 'Talking To Yourself',
        '猫舌' : 'Aversion To Hot Foods',
        '神奈川県' : 'Kanagawa Prefecture',
        '社長' : 'Company President',
        '社会党' : 'Socialist Party',
        '社会福祉' : 'Social Welfare',
        '社内' : 'Within The Company',
        '社費' : 'Company Expenses',
        '畜産' : 'Animal Husbandry',
        '確かめる' : 'To Make Sure Of',
        '申し申し' : 'Telephone Hello',
        '画廊' : 'Picture Gallery',
        '登山' : 'Mountain Climbing',
        '白黒' : 'Black And White',
        '白菊' : 'White Chrysanthemum',
        '甲斐性' : 'Resourcefulness',
        '異義' : 'Different Meaning',
        '番' : 'Number In A Series',
        '生涯' : 'One\'s Lifetime',
        '生還' : 'Reaching Home Plate',
        '生き甲斐' : 'Reason For Living',
        '生保' : 'Life Insurance',
        '留学生' : 'Exchange Student',
        '留守番電話' : 'Answering Machine',
        '私邸' : 'Private Residence',
        '私鉄' : 'Private Railway',
        '私大' : 'Private College',
        '私立大学' : 'Private College',
        '甘く見る' : 'To Not Take Seriously',
        '災い' : 'Personal Disaster',
        '災害' : 'Natural Disaster',
        '疲れる' : 'To Be Exhausted',
        '火炎瓶' : 'Molotov Cocktail',
        '疫病' : 'Infectious Disease',
        '疎通' : 'Mutual Understanding',
        '皇族' : 'Imperial Family',
        '皇室' : 'Imperial Palace',
        '皇后' : 'Japanese Empress',
        '皇太子妃' : 'Crown Princess',
        '磁場' : 'Magnetic Field',
        '議員' : 'Member Of The Diet',
        '警官' : 'Police Officer',
        '警察官' : 'Police Officer',
        '警察庁' : 'National Police Agency',
        '警察署' : 'Police Station',
        '警視庁' : 'Metropolitan Police Department',
        '診る' : 'To Examine A Patient',
        '訳語' : 'Translated Term',
        '証拠' : 'Physical Evidence',
        '言葉遣い' : 'Choice Of Words',
        '詞' : 'Part Of Speech',
        '話し方' : 'Way Of Speaking',
        '試験地獄' : 'Entrance Exam Hell',
        '詐称' : 'Misrepresentation',
        '賀' : 'Congratulations',
        '資格' : 'Qualifications',
        '賓客' : 'Guest Of Honor',
        '迷わす' : 'To Lead Astray',
        '追い付く' : 'To Catch Up To',
        '軒並' : 'Across The Board',
        '近距離' : 'Short Distance',
        '近視' : 'Nearsightedness',
        '迎える' : 'To Pick Someone Up',
        '迎賓館' : 'Reception Hall',
        '車掌' : 'Train Conductor',
        '車内' : 'Inside The Car',
        '軍艦島' : 'Battleship Island',
        '返る' : 'To Be Returned',
        '辛勝' : 'Narrow Victory',
        '辞書形' : 'Dictionary Form',
        '輸血' : 'Blood Transfusion',
        '載る' : 'To Be Published',
        '起こす' : 'To Wake Someone Up',
        '起訴猶予' : 'Suspension Of Indictment',
        '赴任' : 'Move For A Different Job',
        '超音波' : 'Ultrasonic Wave',
        '超音速' : 'Supersonic Speed',
        '越権' : 'Overstepping Your Authority',
        '贈る' : 'To Give A Present',
        '貨幣価値' : 'Currency Value',
        '責任' : 'Responsibility',
        '責任感' : 'Sense Of Responsibility',
        '調べる' : 'To Investigate',
        '課長' : 'Section Manager',
        '説明書' : 'Written Explanation',
        '誇る' : 'To Be Proud Of',
        '誤算' : 'Miscalculation',
        '誤解' : 'Misunderstanding',
        '謹賀新年' : 'Happy New Year',
        '謙譲語' : 'Humble Japanese',
        '諮る' : 'To Consult With',
        '諾否' : 'Consent Or Refusal',
        '論旨' : 'Point Of An Argument',
        '華道' : 'Flower Arrangement',
        '脱字' : 'Omitted Character',
        '親子丼' : 'Parent And Child Bowl',
        '親不孝' : 'Lack Of Filial Piety',
        '脇役' : 'Supporting Actor',
        '脇見' : 'Looking From The Side',
        '見渡す' : 'To Look Out Over',
        '見抜く' : 'To See Through',
        '見極める' : 'To See Through',
        '胡座' : 'Sitting Cross Legged',
        '見分ける' : 'To Distinguish',
        '見返る' : 'To Look Back At',
        '見返す' : 'To Look Back At',
        '要項' : 'Important Points',
        '視覚' : 'Sense Of Sight',
        '耳打ち' : 'Whisper In Ear',
        '自浄' : 'Self Purification',
        '自決' : 'Self Determination',
        '自民党' : 'Liberal Democratic Party',
        '自己紹介' : 'Self Introduction',
        '自動詞' : 'Intransitive Verb',
        '自動販売機' : 'Vending Machine',
        '自炊' : 'Cooking For Oneself',
        '自販機' : 'Vending Machine',
        '自薦' : 'Recommendation',
        '考え方' : 'Way Of Thinking',
        '考える' : 'To Think About',
        '耐熱' : 'Heat Resisting',
        '臓' : 'Internal Organs',
        '老眼' : 'Farsightedness',
        '落とす' : 'To Drop Something',
        '落胆' : 'Discouragement',
        '花柳' : 'Red Light District',
        '花柳界' : 'Red Light District',
        '色盲' : 'Color Blindness',
        '花見' : 'Viewing Cherry Blossoms',
        '航空母艦' : 'Aircraft Carrier',
        '航空券' : 'Airplane Ticket',
        '艦艇' : 'Military Vessel',
        '肉欲' : 'Carnal Desires',
        '表情' : 'Facial Expression',
        '表彰' : 'Public Acknowledgement',
        '茨城県' : 'Ibaraki Prefecture',
        '英文' : 'English Writing',
        '英会話' : 'English Conversation',
        '英和' : 'English Japanese',
        '英訳' : 'English Translation',
        '英語' : 'English Language',
        '英語圏' : 'English Speaking World',
        '苦手' : 'Hard To Deal With',
        '衆議院' : 'House Of Representatives',
        '血族' : 'Blood Relative',
        '血圧' : 'Blood Pressure',
        '茂る' : 'To Be Luxurious',
        '行う' : 'To Carry Out A Task',
        '行き' : 'Train Direction',
        '虹色' : 'Rainbow Colored',
        '被る' : 'To Put On A Hat',
        '解雇する' : 'To Fire Someone',
        '解ける' : 'To Become Untied',
        '製鋼' : 'Steel Manufacture',
        '聴力' : 'Hearing Ability',
        '薬学' : 'Study Of Pharmacy',
        '薦め' : 'Recommendation',
        '憂国' : 'Patriotic Concern',
    };

    // this handles the small boxes like for kanji and radicals. adds a tooltip.
    function dotExpandSingle() {
        $('ul.single-character-grid a').each(function (index, elem) {
            var enLi, en, item, enFull;
            enLi = $(elem).find('ul li:last-child');
            en = enLi.html();
            if (en.match('[\\.]{3}$')) {
                item = $(elem).find('span').text().replace(/[\n ]+/g,'');
                enFull = dotItem[item];
                if (enFull && enFull.indexOf(en.slice(0, -3)) === 0) {
                    enLi.attr('title', enFull);
                }
            }
        });
    }
    // hook search results
    (function () {
        var removeResults;
        if (typeof Search === "object" && typeof Search.removeResults === "function") {
            removeResults = Search.removeResults;
            Search.removeResults = function () {
                dotExpand();
                removeResults();
            };
        }
    }());

    function dotExpand() {
        ['.single-character-grid','.multi-character-grid'].forEach(function(sel,idx){
            $(sel+' .character-item li:contains("...")').each(function(){
                var enLi = $(this);
                var en = enLi.text().replace(/(^[\n ]+|[\n ]+$)/g,'').slice(0,-3);
                var jp = enLi.closest('a').find('.character').text().replace(/[\n ]+/g,'');
                var enFull = dotItem[jp];
                if (enFull && enFull.match('^'+en.replace(/([()])/g,'\\$1')) !== null) {
                    if (idx === 0) {
                        enLi.attr('title',enFull);
                    } else {
                        enLi.text(enFull);
                    }
                } else {
                    console.log('[DotDotDot Expander]: No expansion found for "'+jp+'" --> "'+en+'..."');
                }
            });
        });
    }

    // run at startup
    dotExpand();
}());
